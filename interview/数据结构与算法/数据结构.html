<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta property="og:url" content="https://newzone.top/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html"><meta property="og:site_name" content="nocetfy"><meta property="og:title" content="æ•°æ®ç»“æ„"><meta property="og:description" content="æ•°æ®ç»“æ„ [toc] çº¢é»‘æ ‘ TreeMapåº•å±‚é€šè¿‡çº¢é»‘æ ‘(Red-Black tree)å®ç°ï¼Œä¹Ÿå°±æ„å‘³ç€containsKey(), get(), put(), remove()éƒ½æœ‰ç€log(n)çš„æ—¶é—´å¤æ‚åº¦ã€‚å…¶å…·ä½“ç®—æ³•å®ç°å‚ç…§äº†ã€Šç®—æ³•å¯¼è®ºã€‹ã€‚ TreeMap_base.png"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"æ•°æ®ç»“æ„","image":[""],"dateModified":null,"author":[]}</script><title>æ•°æ®ç»“æ„ | nocetfy</title><meta name="description" content="æ•°æ®ç»“æ„ [toc] çº¢é»‘æ ‘ TreeMapåº•å±‚é€šè¿‡çº¢é»‘æ ‘(Red-Black tree)å®ç°ï¼Œä¹Ÿå°±æ„å‘³ç€containsKey(), get(), put(), remove()éƒ½æœ‰ç€log(n)çš„æ—¶é—´å¤æ‚åº¦ã€‚å…¶å…·ä½“ç®—æ³•å®ç°å‚ç…§äº†ã€Šç®—æ³•å¯¼è®ºã€‹ã€‚ TreeMap_base.png">
    <meta name="keywords" content="è‡ªæˆ‘æå‡,æ•ˆç‡æå‡,å¼€æºå·¥å…·,å­¦ä¹ ç¬”è®°" />
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #252232;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/MyNotes/assets/style-5e5da23a.css" as="style"><link rel="stylesheet" href="/MyNotes/assets/style-5e5da23a.css">
    <link rel="modulepreload" href="/MyNotes/assets/app-a0fec2f7.js"><link rel="modulepreload" href="/MyNotes/assets/framework-47f15ee6.js"><link rel="modulepreload" href="/MyNotes/assets/æ•°æ®ç»“æ„.html-405e8640.js"><link rel="modulepreload" href="/MyNotes/assets/æ•°æ®ç»“æ„.html-37ffeb4e.js">

    <!-- çœ‹æ¿å¨˜åŒºå— -->
    <link href="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-y/font-awesome/6.0.0/css/all.min.css" type="text/css" rel="stylesheet" />
    <script src="/live2d-widget/autoload.js"></script>
    <!-- End çœ‹æ¿å¨˜åŒºå— -->

    <!-- Matomo æ­¤åŒºå—ä¸ºç»Ÿè®¡ä»£ç ï¼Œè¯·åˆ é™¤-->
    <script>
      var _paq = window._paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="https://piwik.seoipo.com/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '7']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code æ­¤åŒºå—ä¸ºç»Ÿè®¡ä»£ç ï¼Œè¯·åˆ é™¤-->

  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/MyNotes/" class="brand"><img class="logo" src="/MyNotes/logo.svg" alt="nocetfy"><!----><span class="site-name hide-in-pad">nocetfy</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/MyNotes/blog" class="nav-link" aria-label="åšå®¢"><span class="font-icon icon iconfont icon-blog" style=""></span>åšå®¢<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ä»£ç "><span class="title"><span class="font-icon icon iconfont icon-code" style=""></span>ä»£ç </span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/MyNotes/code/Markdown" class="nav-link" aria-label="/code/Markdown"><!---->/code/Markdown<!----></a></li><li class="dropdown-item"><a href="/MyNotes/code/AutoHotkey" class="nav-link" aria-label="/code/AutoHotkey"><!---->/code/AutoHotkey<!----></a></li><li class="dropdown-item"><a href="/MyNotes/code/Electron" class="nav-link" aria-label="/code/Electron"><!---->/code/Electron<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>é¡µé¢å¼€å‘</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/MyNotes/web/VuePress" class="nav-link" aria-label="/web/VuePress"><!---->/web/VuePress<!----></a></li><li class="dropdown-subitem"><a href="/MyNotes/web/docsify" class="nav-link" aria-label="/web/docsify"><!---->/web/docsify<!----></a></li><li class="dropdown-subitem"><a href="/MyNotes/deploy/VPS" class="nav-link" aria-label="/deploy/VPS"><!---->/deploy/VPS<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="åº”ç”¨"><span class="title"><span class="font-icon icon iconfont icon-app" style=""></span>åº”ç”¨</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/MyNotes/apps/Applist" class="nav-link" aria-label="/apps/Applist"><!---->/apps/Applist<!----></a></li><li class="dropdown-item"><a href="/MyNotes/apps/ChatGPT" class="nav-link" aria-label="/apps/ChatGPT"><!---->/apps/ChatGPT<!----></a></li><li class="dropdown-item"><a href="/MyNotes/apps/livestreaming/1_obs_basic" class="nav-link" aria-label="ç›´æ’­æ‰‹å†Œ"><span class="font-icon icon iconfont icon-quote" style=""></span>ç›´æ’­æ‰‹å†Œ<!----></a></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æœåŠ¡/ç³»ç»Ÿ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/MyNotes/services/NAS" class="nav-link" aria-label="/services/NAS"><!---->/services/NAS<!----></a></li><li class="dropdown-subitem"><a href="/MyNotes/windows/faq" class="nav-link" aria-label="/windows/faq"><!---->/windows/faq<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ç”Ÿæ´»"><span class="title"><span class="font-icon icon iconfont icon-emmet" style=""></span>ç”Ÿæ´»</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/MyNotes/family/Diet" class="nav-link" aria-label="/family/Diet"><!---->/family/Diet<!----></a></li><li class="dropdown-item"><a href="/MyNotes/family/Shoppinglist" class="nav-link" aria-label="/family/Shoppinglist"><!---->/family/Shoppinglist<!----></a></li><li class="dropdown-item"><a href="/MyNotes/family/Coupon" class="nav-link" aria-label="/family/Coupon"><!---->/family/Coupon<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="https://nav.newzone.top/" rel="noopener noreferrer" target="_blank" aria-label="å·¥å…·æ”¶è—" class="nav-link"><span class="font-icon icon iconfont icon-tool" style=""></span>å·¥å…·æ”¶è—<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><div class="nav-item"><a class="repo-link" href="https://github.com/nocetfy" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><!----><span class="title">ğŸ§° ç®—æ³•ç¬”è®°</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><!----><span class="title">ğŸš€ é¢è¯•ç¬”è®°</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">è®¡ç®—æœºåŸºç¡€</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">Java</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">MySQL</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">Redis</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">æ¶ˆæ¯é˜Ÿåˆ—</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">æ¡†æ¶</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">æ•°æ®ç»“æ„ä¸ç®—æ³•</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="æ•°æ®ç»“æ„"><!---->æ•°æ®ç»“æ„<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#çº¢é»‘æ ‘" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="çº¢é»‘æ ‘"><!---->çº¢é»‘æ ‘<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#é¢„å¤‡çŸ¥è¯†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é¢„å¤‡çŸ¥è¯†"><!---->é¢„å¤‡çŸ¥è¯†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#æ–¹æ³•å‰–æ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ–¹æ³•å‰–æ"><!---->æ–¹æ³•å‰–æ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#å †" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å †"><!---->å †<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#æ–¹æ³•å‰–æ-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ–¹æ³•å‰–æ"><!---->æ–¹æ³•å‰–æ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#bæ ‘ä¸b-æ ‘" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Bæ ‘ä¸B+æ ‘"><!---->Bæ ‘ä¸B+æ ‘<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#bæ ‘" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Bæ ‘"><!---->Bæ ‘<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#b-æ ‘" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="B+æ ‘"><!---->B+æ ‘<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#è·³è¡¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è·³è¡¨"><!---->è·³è¡¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#bitmap-bloomfilter" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="BitMap &amp; BloomFilter"><!---->BitMap &amp; BloomFilter<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#å¤–æ’åº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¤–æ’åº"><!---->å¤–æ’åº<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#ä½å›¾æ’åºæ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½å›¾æ’åºæ³•"><!---->ä½å›¾æ’åºæ³•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#å¤šè·¯å½’å¹¶æ’åº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¤šè·¯å½’å¹¶æ’åº"><!---->å¤šè·¯å½’å¹¶æ’åº<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#é¢˜ç›®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é¢˜ç›®"><!---->é¢˜ç›®<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">ç½‘ç»œ</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">æ¶æ„</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">åˆ†å¸ƒå¼</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">è¿ç»´å¼€å‘</span><span class="arrow right"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-ability" style=""></span><span class="title">å¼€æ”¾è®¾è®¡</span><span class="arrow right"></span></button><!----></section></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->æ•°æ®ç»“æ„</h1><div class="page-info"><!----><!----><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 9920 å­—</span><meta property="wordCount" content="9920"></span><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 33 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT33M"></span><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#çº¢é»‘æ ‘" class="router-link-active router-link-exact-active toc-link level2">çº¢é»‘æ ‘</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#é¢„å¤‡çŸ¥è¯†" class="router-link-active router-link-exact-active toc-link level3">é¢„å¤‡çŸ¥è¯†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#æ–¹æ³•å‰–æ" class="router-link-active router-link-exact-active toc-link level3">æ–¹æ³•å‰–æ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#å †" class="router-link-active router-link-exact-active toc-link level2">å †</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#æ–¹æ³•å‰–æ-1" class="router-link-active router-link-exact-active toc-link level3">æ–¹æ³•å‰–æ</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#bæ ‘ä¸b-æ ‘" class="router-link-active router-link-exact-active toc-link level2">Bæ ‘ä¸B+æ ‘</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#bæ ‘" class="router-link-active router-link-exact-active toc-link level3">Bæ ‘</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#b-æ ‘" class="router-link-active router-link-exact-active toc-link level3">B+æ ‘</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#è·³è¡¨" class="router-link-active router-link-exact-active toc-link level2">è·³è¡¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#bitmap-bloomfilter" class="router-link-active router-link-exact-active toc-link level2">BitMap &amp; BloomFilter</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#å¤–æ’åº" class="router-link-active router-link-exact-active toc-link level2">å¤–æ’åº</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#ä½å›¾æ’åºæ³•" class="router-link-active router-link-exact-active toc-link level3">ä½å›¾æ’åºæ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#å¤šè·¯å½’å¹¶æ’åº" class="router-link-active router-link-exact-active toc-link level3">å¤šè·¯å½’å¹¶æ’åº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/MyNotes/interview/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html#é¢˜ç›®" class="router-link-active router-link-exact-active toc-link level3">é¢˜ç›®</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><h1 id="æ•°æ®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#æ•°æ®ç»“æ„" aria-hidden="true">#</a> æ•°æ®ç»“æ„</h1><p>[toc]</p><h2 id="çº¢é»‘æ ‘" tabindex="-1"><a class="header-anchor" href="#çº¢é»‘æ ‘" aria-hidden="true">#</a> çº¢é»‘æ ‘</h2><p><strong>TreeMapåº•å±‚é€šè¿‡çº¢é»‘æ ‘(Red-Black tree)å®ç°</strong>ï¼Œä¹Ÿå°±æ„å‘³ç€<code>containsKey()</code>, <code>get()</code>, <code>put()</code>, <code>remove()</code>éƒ½æœ‰ç€<code>log(n)</code>çš„æ—¶é—´å¤æ‚åº¦ã€‚å…¶å…·ä½“ç®—æ³•å®ç°å‚ç…§äº†ã€Šç®—æ³•å¯¼è®ºã€‹ã€‚</p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/TreeMap_base.png" alt="TreeMap_base.png" tabindex="0" loading="lazy"><figcaption>TreeMap_base.png</figcaption></figure><p>å‡ºäºæ€§èƒ½åŸå› ï¼Œ<code>TreeMap</code>æ˜¯éåŒæ­¥çš„(not synchronized)ï¼Œå¦‚æœéœ€è¦åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä½¿ç”¨ï¼Œéœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨åŒæ­¥ï¼›æˆ–è€…é€šè¿‡å¦‚ä¸‹æ–¹å¼å°†<code>TreeMap</code>åŒ…è£…æˆ(wrapped)åŒæ­¥çš„:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">SortedMap</span> m <span class="token operator">=</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">synchronizedSortedMap</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TreeMap</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>çº¢é»‘æ ‘æ˜¯ä¸€ç§è¿‘ä¼¼å¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå®ƒèƒ½å¤Ÿç¡®ä¿ä»»ä½•ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸ä¼šè¶…è¿‡äºŒè€…ä¸­è¾ƒä½é‚£ä¸ªçš„ä¸€å€</strong>ã€‚å…·ä½“æ¥è¯´ï¼Œçº¢é»‘æ ‘æ˜¯æ»¡è¶³å¦‚ä¸‹æ¡ä»¶çš„äºŒå‰æŸ¥æ‰¾æ ‘(binary search tree):</p><ol><li>æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯çº¢è‰²ï¼Œè¦ä¹ˆæ˜¯é»‘è‰²ã€‚</li><li>æ ¹èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²</li><li>çº¢è‰²èŠ‚ç‚¹ä¸èƒ½è¿ç»­(ä¹Ÿå³æ˜¯ï¼Œçº¢è‰²èŠ‚ç‚¹çš„å­©å­å’Œçˆ¶äº²éƒ½ä¸èƒ½æ˜¯çº¢è‰²)ã€‚</li><li>å¯¹äºæ¯ä¸ªèŠ‚ç‚¹ï¼Œä»è¯¥ç‚¹è‡³<code>null</code>(æ ‘å°¾ç«¯)çš„ä»»ä½•è·¯å¾„ï¼Œéƒ½å«æœ‰ç›¸åŒä¸ªæ•°çš„é»‘è‰²èŠ‚ç‚¹ã€‚</li></ol><p>åœ¨æ ‘çš„ç»“æ„å‘ç”Ÿæ”¹å˜æ—¶(æ’å…¥æˆ–è€…åˆ é™¤æ“ä½œ)ï¼Œå¾€å¾€ä¼šç ´åä¸Šè¿°æ¡ä»¶3æˆ–æ¡ä»¶4ï¼Œéœ€è¦é€šè¿‡è°ƒæ•´ä½¿å¾—æŸ¥æ‰¾æ ‘é‡æ–°æ»¡è¶³çº¢é»‘æ ‘çš„çº¦æŸæ¡ä»¶ã€‚</p><h3 id="é¢„å¤‡çŸ¥è¯†" tabindex="-1"><a class="header-anchor" href="#é¢„å¤‡çŸ¥è¯†" aria-hidden="true">#</a> é¢„å¤‡çŸ¥è¯†</h3><p>â€‹ å‰æ–‡è¯´åˆ°å½“æŸ¥æ‰¾æ ‘çš„ç»“æ„å‘ç”Ÿæ”¹å˜æ—¶ï¼Œçº¢é»‘æ ‘çš„çº¦æŸæ¡ä»¶å¯èƒ½è¢«ç ´åï¼Œéœ€è¦é€šè¿‡è°ƒæ•´ä½¿å¾—æŸ¥æ‰¾æ ‘é‡æ–°æ»¡è¶³çº¢é»‘æ ‘çš„çº¦æŸæ¡ä»¶ã€‚è°ƒæ•´å¯ä»¥åˆ†ä¸ºä¸¤ç±»: ä¸€ç±»æ˜¯é¢œè‰²è°ƒæ•´ï¼Œå³æ”¹å˜æŸä¸ªèŠ‚ç‚¹çš„é¢œè‰²ï¼›å¦ä¸€ç±»æ˜¯ç»“æ„è°ƒæ•´ï¼Œå³æ”¹å˜æ£€ç´¢æ ‘çš„ç»“æ„å…³ç³»ã€‚ç»“æ„è°ƒæ•´è¿‡ç¨‹åŒ…å«ä¸¤ä¸ªåŸºæœ¬æ“ä½œ: å·¦æ—‹(Rotate Left)ï¼Œå³æ—‹(RotateRight)ã€‚</p><h4 id="å·¦æ—‹" tabindex="-1"><a class="header-anchor" href="#å·¦æ—‹" aria-hidden="true">#</a> å·¦æ—‹</h4><p>å·¦æ—‹çš„è¿‡ç¨‹æ˜¯å°†<code>x</code>çš„å³å­æ ‘ç»•<code>x</code>é€†æ—¶é’ˆæ—‹è½¬ï¼Œä½¿å¾—<code>x</code>çš„å³å­æ ‘æˆä¸º<code>x</code>çš„çˆ¶äº²ï¼ŒåŒæ—¶ä¿®æ”¹ç›¸å…³èŠ‚ç‚¹çš„å¼•ç”¨ã€‚æ—‹è½¬ä¹‹åï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘çš„å±æ€§ä»ç„¶æ»¡è¶³ã€‚</p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/TreeMap_rotateLeft.png" alt="TreeMap_rotateLeft.png" tabindex="0" loading="lazy"><figcaption>TreeMap_rotateLeft.png</figcaption></figure><p><code>TreeMap</code>ä¸­å·¦æ—‹ä»£ç å¦‚ä¸‹:</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>//Rotate Left
private void rotateLeft(Entry&lt;K,V&gt; p) {
    if (p != null) {
        Entry&lt;K,V&gt; r = p.right;
        p.right = r.left;
        if (r.left != null)
            r.left.parent = p;
        r.parent = p.parent;
        if (p.parent == null)
            root = r;
        else if (p.parent.left == p)
            p.parent.left = r;
        else
            p.parent.right = r;
        r.left = p;
        p.parent = r;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å³æ—‹" tabindex="-1"><a class="header-anchor" href="#å³æ—‹" aria-hidden="true">#</a> å³æ—‹</h4><p>å³æ—‹çš„è¿‡ç¨‹æ˜¯å°†<code>x</code>çš„å·¦å­æ ‘ç»•<code>x</code>é¡ºæ—¶é’ˆæ—‹è½¬ï¼Œä½¿å¾—<code>x</code>çš„å·¦å­æ ‘æˆä¸º<code>x</code>çš„çˆ¶äº²ï¼ŒåŒæ—¶ä¿®æ”¹ç›¸å…³èŠ‚ç‚¹çš„å¼•ç”¨ã€‚æ—‹è½¬ä¹‹åï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘çš„å±æ€§ä»ç„¶æ»¡è¶³ã€‚</p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/TreeMap_rotateRight.png" alt="TreeMap_rotateRight.png" tabindex="0" loading="lazy"><figcaption>TreeMap_rotateRight.png</figcaption></figure><p><code>TreeMap</code>ä¸­å³æ—‹ä»£ç å¦‚ä¸‹:</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>//Rotate Right
private void rotateRight(Entry&lt;K,V&gt; p) {
    if (p != null) {
        Entry&lt;K,V&gt; l = p.left;
        p.left = l.right;
        if (l.right != null) l.right.parent = p;
        l.parent = p.parent;
        if (p.parent == null)
            root = l;
        else if (p.parent.right == p)
            p.parent.right = l;
        else p.parent.left = l;
        l.right = p;
        p.parent = l;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¯»æ‰¾èŠ‚ç‚¹åç»§" tabindex="-1"><a class="header-anchor" href="#å¯»æ‰¾èŠ‚ç‚¹åç»§" aria-hidden="true">#</a> å¯»æ‰¾èŠ‚ç‚¹åç»§</h4><p>å¯¹äºä¸€æ£µäºŒå‰æŸ¥æ‰¾æ ‘ï¼Œç»™å®šèŠ‚ç‚¹tï¼Œå…¶åç»§(æ ‘ä¸­æ¯”å¤§äºtçš„æœ€å°çš„é‚£ä¸ªå…ƒç´ )å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼æ‰¾åˆ°:</p><blockquote><ol><li>tçš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™tçš„åç»§æ˜¯å…¶å³å­æ ‘ä¸­æœ€å°çš„é‚£ä¸ªå…ƒç´ ã€‚</li><li>tçš„å³å­©å­ä¸ºç©ºï¼Œåˆ™tçš„åç»§æ˜¯å…¶ç¬¬ä¸€ä¸ªå‘å·¦èµ°çš„ç¥–å…ˆã€‚</li></ol></blockquote><p>åç»§èŠ‚ç‚¹åœ¨çº¢é»‘æ ‘çš„åˆ é™¤æ“ä½œä¸­å°†ä¼šç”¨åˆ°ã€‚</p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/TreeMap_successor.png" alt="TreeMap_successor.png" tabindex="0" loading="lazy"><figcaption>TreeMap_successor.png</figcaption></figure><p><code>TreeMap</code>ä¸­å¯»æ‰¾èŠ‚ç‚¹åç»§çš„ä»£ç å¦‚ä¸‹:</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>// å¯»æ‰¾èŠ‚ç‚¹åç»§å‡½æ•°successor()
static &lt;K,V&gt; TreeMap.Entry&lt;K,V&gt; successor(Entry&lt;K,V&gt; t) {
    if (t == null)
        return null;
    else if (t.right != null) {// 1. tçš„å³å­æ ‘ä¸ç©ºï¼Œåˆ™tçš„åç»§æ˜¯å…¶å³å­æ ‘ä¸­æœ€å°çš„é‚£ä¸ªå…ƒç´ 
        Entry&lt;K,V&gt; p = t.right;
        while (p.left != null)
            p = p.left;
        return p;
    } else {// 2. tçš„å³å­©å­ä¸ºç©ºï¼Œåˆ™tçš„åç»§æ˜¯å…¶ç¬¬ä¸€ä¸ªå‘å·¦èµ°çš„ç¥–å…ˆ
        Entry&lt;K,V&gt; p = t.parent;
        Entry&lt;K,V&gt; ch = t;
        while (p != null &amp;&amp; ch == p.right) {
            ch = p;
            p = p.parent;
        }
        return p;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ–¹æ³•å‰–æ" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•å‰–æ" aria-hidden="true">#</a> æ–¹æ³•å‰–æ</h3><h4 id="get" tabindex="-1"><a class="header-anchor" href="#get" aria-hidden="true">#</a> get()</h4><p><code> get(Object key)</code>æ–¹æ³•æ ¹æ®æŒ‡å®šçš„<code>key</code>å€¼è¿”å›å¯¹åº”çš„<code>value</code>ï¼Œè¯¥æ–¹æ³•è°ƒç”¨äº†<code>getEntry(Object key)</code>å¾—åˆ°ç›¸åº”çš„<code>entry</code>ï¼Œç„¶åè¿”å›<code>entry.value</code>ã€‚å› æ­¤<code>getEntry()</code>æ˜¯ç®—æ³•çš„æ ¸å¿ƒã€‚ç®—æ³•æ€æƒ³æ˜¯æ ¹æ®<code>key</code>çš„è‡ªç„¶é¡ºåº(æˆ–è€…æ¯”è¾ƒå™¨é¡ºåº)å¯¹äºŒå‰æŸ¥æ‰¾æ ‘è¿›è¡ŒæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°æ»¡è¶³<code>k.compareTo(p.key) == 0</code>çš„<code>entry</code>ã€‚</p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/TreeMap_getEntry.png" alt="TreeMap_getEntry.png" tabindex="0" loading="lazy"><figcaption>TreeMap_getEntry.png</figcaption></figure><p>å…·ä½“ä»£ç å¦‚ä¸‹:</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>//getEntry()æ–¹æ³•
final Entry&lt;K,V&gt; getEntry(Object key) {
    ......
    if (key == null)//ä¸å…è®¸keyå€¼ä¸ºnull
        throw new NullPointerException();
    Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key;//ä½¿ç”¨å…ƒç´ çš„è‡ªç„¶é¡ºåº
    Entry&lt;K,V&gt; p = root;
    while (p != null) {
        int cmp = k.compareTo(p.key);
        if (cmp &lt; 0)//å‘å·¦æ‰¾
            p = p.left;
        else if (cmp &gt; 0)//å‘å³æ‰¾
            p = p.right;
        else
            return p;
    }
    return null;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="put" tabindex="-1"><a class="header-anchor" href="#put" aria-hidden="true">#</a> put()</h4><p><code> put(K key, V value)</code>æ–¹æ³•æ˜¯å°†æŒ‡å®šçš„<code>key</code>, <code>value</code>å¯¹æ·»åŠ åˆ°<code>map</code>é‡Œã€‚è¯¥æ–¹æ³•é¦–å…ˆä¼šå¯¹<code>map</code>åšä¸€æ¬¡æŸ¥æ‰¾ï¼Œçœ‹æ˜¯å¦åŒ…å«è¯¥å…ƒç»„ï¼Œå¦‚æœå·²ç»åŒ…å«åˆ™ç›´æ¥è¿”å›ï¼ŒæŸ¥æ‰¾è¿‡ç¨‹ç±»ä¼¼äº<code>getEntry()</code>æ–¹æ³•ï¼›å¦‚æœæ²¡æœ‰æ‰¾åˆ°åˆ™ä¼šåœ¨çº¢é»‘æ ‘ä¸­æ’å…¥æ–°çš„<code>entry</code>ï¼Œå¦‚æœæ’å…¥ä¹‹åç ´åäº†çº¢é»‘æ ‘çš„çº¦æŸæ¡ä»¶ï¼Œè¿˜éœ€è¦è¿›è¡Œè°ƒæ•´(æ—‹è½¬ï¼Œæ”¹å˜æŸäº›èŠ‚ç‚¹çš„é¢œè‰²)ã€‚</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>public V put(K key, V value) {
	......
    int cmp;
    Entry&lt;K,V&gt; parent;
    if (key == null)
        throw new NullPointerException();
    Comparable&lt;? super K&gt; k = (Comparable&lt;? super K&gt;) key;//ä½¿ç”¨å…ƒç´ çš„è‡ªç„¶é¡ºåº
    do {
        parent = t;
        cmp = k.compareTo(t.key);
        if (cmp &lt; 0) t = t.left;//å‘å·¦æ‰¾
        else if (cmp &gt; 0) t = t.right;//å‘å³æ‰¾
        else return t.setValue(value);
    } while (t != null);
    Entry&lt;K,V&gt; e = new Entry&lt;&gt;(key, value, parent);//åˆ›å»ºå¹¶æ’å…¥æ–°çš„entry
    if (cmp &lt; 0) parent.left = e;
    else parent.right = e;
    fixAfterInsertion(e);//è°ƒæ•´
    size++;
    return null;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸Šè¿°ä»£ç çš„æ’å…¥éƒ¨åˆ†å¹¶ä¸éš¾ç†è§£: é¦–å…ˆåœ¨çº¢é»‘æ ‘ä¸Šæ‰¾åˆ°åˆé€‚çš„ä½ç½®ï¼Œç„¶ååˆ›å»ºæ–°çš„<code>entry</code>å¹¶æ’å…¥(å½“ç„¶ï¼Œæ–°æ’å…¥çš„èŠ‚ç‚¹ä¸€å®šæ˜¯æ ‘çš„å¶å­)ã€‚éš¾ç‚¹æ˜¯è°ƒæ•´å‡½æ•°<code>fixAfterInsertion()</code>ï¼Œå‰é¢å·²ç»è¯´è¿‡ï¼Œè°ƒæ•´å¾€å¾€éœ€è¦1.æ”¹å˜æŸäº›èŠ‚ç‚¹çš„é¢œè‰²ï¼Œ2.å¯¹æŸäº›èŠ‚ç‚¹è¿›è¡Œæ—‹è½¬ã€‚</p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/TreeMap_put.png" alt="TreeMap_put.png" tabindex="0" loading="lazy"><figcaption>TreeMap_put.png</figcaption></figure><p>â€‹ è°ƒæ•´å‡½æ•°<code>fixAfterInsertion()</code>çš„å…·ä½“ä»£ç å¦‚ä¸‹ï¼Œå…¶ä¸­ç”¨åˆ°äº†ä¸Šæ–‡ä¸­æåˆ°çš„<code>rotateLeft()</code>å’Œ<code>rotateRight()</code>å‡½æ•°ã€‚é€šè¿‡ä»£ç æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°ï¼Œæƒ…å†µ2å…¶å®æ˜¯è½åœ¨æƒ…å†µ3å†…çš„ã€‚æƒ…å†µ4ï½æƒ…å†µ6è·Ÿå‰ä¸‰ç§æƒ…å†µæ˜¯å¯¹ç§°çš„ï¼Œå› æ­¤å›¾è§£ä¸­å¹¶æ²¡æœ‰ç”»å‡ºåä¸‰ç§æƒ…å†µï¼Œè¯»è€…å¯ä»¥å‚è€ƒä»£ç è‡ªè¡Œç†è§£ã€‚</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>//çº¢é»‘æ ‘è°ƒæ•´å‡½æ•°fixAfterInsertion()
private void fixAfterInsertion(Entry&lt;K,V&gt; x) {
    x.color = RED;
    while (x != null &amp;&amp; x != root &amp;&amp; x.parent.color == RED) {
        if (parentOf(x) == leftOf(parentOf(parentOf(x)))) {
            Entry&lt;K,V&gt; y = rightOf(parentOf(parentOf(x)));
            if (colorOf(y) == RED) {
                setColor(parentOf(x), BLACK);              // æƒ…å†µ1
                setColor(y, BLACK);                        // æƒ…å†µ1
                setColor(parentOf(parentOf(x)), RED);      // æƒ…å†µ1
                x = parentOf(parentOf(x));                 // æƒ…å†µ1
            } else {
                if (x == rightOf(parentOf(x))) {
                    x = parentOf(x);                       // æƒ…å†µ2
                    rotateLeft(x);                         // æƒ…å†µ2
                }
                setColor(parentOf(x), BLACK);              // æƒ…å†µ3
                setColor(parentOf(parentOf(x)), RED);      // æƒ…å†µ3
                rotateRight(parentOf(parentOf(x)));        // æƒ…å†µ3
            }
        } else {
            Entry&lt;K,V&gt; y = leftOf(parentOf(parentOf(x)));
            if (colorOf(y) == RED) {
                setColor(parentOf(x), BLACK);              // æƒ…å†µ4
                setColor(y, BLACK);                        // æƒ…å†µ4
                setColor(parentOf(parentOf(x)), RED);      // æƒ…å†µ4
                x = parentOf(parentOf(x));                 // æƒ…å†µ4
            } else {
                if (x == leftOf(parentOf(x))) {
                    x = parentOf(x);                       // æƒ…å†µ5
                    rotateRight(x);                        // æƒ…å†µ5
                }
                setColor(parentOf(x), BLACK);              // æƒ…å†µ6
                setColor(parentOf(parentOf(x)), RED);      // æƒ…å†µ6
                rotateLeft(parentOf(parentOf(x)));         // æƒ…å†µ6
            }
        }
    }
    root.color = BLACK;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="remove" tabindex="-1"><a class="header-anchor" href="#remove" aria-hidden="true">#</a> remove()</h4><p>â€‹ <code>remove(Object key)</code>çš„ä½œç”¨æ˜¯åˆ é™¤<code>key</code>å€¼å¯¹åº”çš„<code>entry</code>ï¼Œè¯¥æ–¹æ³•é¦–å…ˆé€šè¿‡ä¸Šæ–‡ä¸­æåˆ°çš„<code>getEntry(Object key)</code>æ–¹æ³•æ‰¾åˆ°<code>key</code>å€¼å¯¹åº”çš„<code>entry</code>ï¼Œç„¶åè°ƒç”¨<code>deleteEntry(Entry&lt;K,V&gt; entry)</code>åˆ é™¤å¯¹åº”çš„<code>entry</code>ã€‚ç”±äºåˆ é™¤æ“ä½œä¼šæ”¹å˜çº¢é»‘æ ‘çš„ç»“æ„ï¼Œæœ‰å¯èƒ½ç ´åçº¢é»‘æ ‘çš„çº¦æŸæ¡ä»¶ï¼Œå› æ­¤æœ‰å¯èƒ½è¦è¿›è¡Œè°ƒæ•´ã€‚</p><p><code>getEntry()</code>å‡½æ•°å‰é¢å·²ç»è®²è§£è¿‡ï¼Œè¿™é‡Œé‡ç‚¹æ”¾<code>deleteEntry()</code>ä¸Šï¼Œè¯¥å‡½æ•°åˆ é™¤æŒ‡å®šçš„<code>entry</code>å¹¶åœ¨çº¢é»‘æ ‘çš„çº¦æŸè¢«ç ´åæ—¶è¿›è¡Œè°ƒç”¨<code>fixAfterDeletion(Entry&lt;K,V&gt; x)</code>è¿›è¡Œè°ƒæ•´ã€‚</p><p><strong>ç”±äºçº¢é»‘æ ‘æ˜¯ä¸€æ£µå¢å¼ºç‰ˆçš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œçº¢é»‘æ ‘çš„åˆ é™¤æ“ä½œè·Ÿæ™®é€šäºŒå‰æŸ¥æ‰¾æ ‘çš„åˆ é™¤æ“ä½œä¹Ÿå°±éå¸¸ç›¸ä¼¼ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯çº¢é»‘æ ‘åœ¨èŠ‚ç‚¹åˆ é™¤ä¹‹åå¯èƒ½éœ€è¦è¿›è¡Œè°ƒæ•´</strong>ã€‚ç°åœ¨è€ƒè™‘ä¸€æ£µæ™®é€šäºŒå‰æŸ¥æ‰¾æ ‘çš„åˆ é™¤è¿‡ç¨‹ï¼Œå¯ä»¥ç®€å•åˆ†ä¸ºä¸¤ç§æƒ…å†µ:</p><blockquote><ol><li>åˆ é™¤ç‚¹pçš„å·¦å³å­æ ‘éƒ½ä¸ºç©ºï¼Œæˆ–è€…åªæœ‰ä¸€æ£µå­æ ‘éç©ºã€‚</li><li>åˆ é™¤ç‚¹pçš„å·¦å³å­æ ‘éƒ½éç©ºã€‚</li></ol></blockquote><p>â€‹ å¯¹äºä¸Šè¿°æƒ…å†µ1ï¼Œå¤„ç†èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œç›´æ¥å°†påˆ é™¤(å·¦å³å­æ ‘éƒ½ä¸ºç©ºæ—¶)ï¼Œæˆ–è€…ç”¨éç©ºå­æ ‘æ›¿ä»£p(åªæœ‰ä¸€æ£µå­æ ‘éç©ºæ—¶)ï¼›å¯¹äºæƒ…å†µ2ï¼Œå¯ä»¥ç”¨pçš„åç»§s(æ ‘ä¸­å¤§äºxçš„æœ€å°çš„é‚£ä¸ªå…ƒç´ )ä»£æ›¿pï¼Œç„¶åä½¿ç”¨æƒ…å†µ1åˆ é™¤s(æ­¤æ—¶sä¸€å®šæ»¡è¶³æƒ…å†µ1.å¯ä»¥ç”»ç”»çœ‹)ã€‚</p><p>åŸºäºä»¥ä¸Šé€»è¾‘ï¼Œçº¢é»‘æ ‘çš„èŠ‚ç‚¹åˆ é™¤å‡½æ•°<code>deleteEntry()</code>ä»£ç å¦‚ä¸‹:</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>// çº¢é»‘æ ‘entryåˆ é™¤å‡½æ•°deleteEntry()
private void deleteEntry(Entry&lt;K,V&gt; p) {
    modCount++;
    size--;
    if (p.left != null &amp;&amp; p.right != null) {// 2. åˆ é™¤ç‚¹pçš„å·¦å³å­æ ‘éƒ½éç©ºã€‚
        Entry&lt;K,V&gt; s = successor(p);// åç»§
        p.key = s.key;
        p.value = s.value;
        p = s;
    }
    Entry&lt;K,V&gt; replacement = (p.left != null ? p.left : p.right);
    if (replacement != null) {// 1. åˆ é™¤ç‚¹påªæœ‰ä¸€æ£µå­æ ‘éç©ºã€‚
        replacement.parent = p.parent;
        if (p.parent == null)
            root = replacement;
        else if (p == p.parent.left)
            p.parent.left  = replacement;
        else
            p.parent.right = replacement;
        p.left = p.right = p.parent = null;
        if (p.color == BLACK)
            fixAfterDeletion(replacement);// è°ƒæ•´
    } else if (p.parent == null) {
        root = null;
    } else { // 1. åˆ é™¤ç‚¹pçš„å·¦å³å­æ ‘éƒ½ä¸ºç©º
        if (p.color == BLACK)
            fixAfterDeletion(p);// è°ƒæ•´
        if (p.parent != null) {
            if (p == p.parent.left)
                p.parent.left = null;
            else if (p == p.parent.right)
                p.parent.right = null;
            p.parent = null;
        }
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸Šè¿°ä»£ç ä¸­å æ®å¤§é‡ä»£ç è¡Œçš„ï¼Œæ˜¯ç”¨æ¥ä¿®æ”¹çˆ¶å­èŠ‚ç‚¹é—´å¼•ç”¨å…³ç³»çš„ä»£ç ï¼Œå…¶é€»è¾‘å¹¶ä¸éš¾ç†è§£ã€‚ä¸‹é¢ç€é‡è®²è§£åˆ é™¤åè°ƒæ•´å‡½æ•°<code>fixAfterDeletion()</code>ã€‚é¦–å…ˆè¯·æ€è€ƒä¸€ä¸‹ï¼Œåˆ é™¤äº†å“ªäº›ç‚¹æ‰ä¼šå¯¼è‡´è°ƒæ•´ï¼Ÿ<strong>åªæœ‰åˆ é™¤ç‚¹æ˜¯BLACKçš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘è°ƒæ•´å‡½æ•°</strong>ï¼Œå› ä¸ºåˆ é™¤REDèŠ‚ç‚¹ä¸ä¼šç ´åçº¢é»‘æ ‘çš„ä»»ä½•çº¦æŸï¼Œè€Œåˆ é™¤BLACKèŠ‚ç‚¹ä¼šç ´åè§„åˆ™4ã€‚</p><p>è·Ÿä¸Šæ–‡ä¸­è®²è¿‡çš„<code>fixAfterInsertion()</code>å‡½æ•°ä¸€æ ·ï¼Œè¿™é‡Œä¹Ÿè¦åˆ†æˆè‹¥å¹²ç§æƒ…å†µã€‚è®°ä½ï¼Œ<strong>æ— è®ºæœ‰å¤šå°‘æƒ…å†µï¼Œå…·ä½“çš„è°ƒæ•´æ“ä½œåªæœ‰ä¸¤ç§: 1.æ”¹å˜æŸäº›èŠ‚ç‚¹çš„é¢œè‰²ï¼Œ2.å¯¹æŸäº›èŠ‚ç‚¹è¿›è¡Œæ—‹è½¬ã€‚</strong></p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/TreeMap_fixAfterDeletion.png" alt="TreeMap_fixAfterDeletion.png" tabindex="0" loading="lazy"><figcaption>TreeMap_fixAfterDeletion.png</figcaption></figure><p>â€‹ ä¸Šè¿°å›¾è§£çš„æ€»ä½“æ€æƒ³æ˜¯: å°†æƒ…å†µ1é¦–å…ˆè½¬æ¢æˆæƒ…å†µ2ï¼Œæˆ–è€…è½¬æ¢æˆæƒ…å†µ3å’Œæƒ…å†µ4ã€‚å½“ç„¶ï¼Œè¯¥å›¾è§£å¹¶ä¸æ„å‘³ç€è°ƒæ•´è¿‡ç¨‹ä¸€å®šæ˜¯ä»æƒ…å†µ1å¼€å§‹ã€‚é€šè¿‡åç»­ä»£ç æˆ‘ä»¬è¿˜ä¼šå‘ç°å‡ ä¸ªæœ‰è¶£çš„è§„åˆ™: a).å¦‚æœæ˜¯ç”±æƒ…å†µ1ä¹‹åç´§æ¥ç€è¿›å…¥çš„æƒ…å†µ2ï¼Œé‚£ä¹ˆæƒ…å†µ2ä¹‹åä¸€å®šä¼šé€€å‡ºå¾ªç¯(å› ä¸ºxä¸ºçº¢è‰²)ï¼›b).ä¸€æ—¦è¿›å…¥æƒ…å†µ3å’Œæƒ…å†µ4ï¼Œä¸€å®šä¼šé€€å‡ºå¾ªç¯(å› ä¸ºxä¸ºroot)ã€‚</p><p>â€‹ åˆ é™¤åè°ƒæ•´å‡½æ•°<code>fixAfterDeletion()</code>çš„å…·ä½“ä»£ç å¦‚ä¸‹ï¼Œå…¶ä¸­ç”¨åˆ°äº†ä¸Šæ–‡ä¸­æåˆ°çš„<code>rotateLeft()</code>å’Œ<code>rotateRight()</code>å‡½æ•°ã€‚é€šè¿‡ä»£ç æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°ï¼Œæƒ…å†µ3å…¶å®æ˜¯è½åœ¨æƒ…å†µ4å†…çš„ã€‚æƒ…å†µ5ï½æƒ…å†µ8è·Ÿå‰å››ç§æƒ…å†µæ˜¯å¯¹ç§°çš„ï¼Œå› æ­¤å›¾è§£ä¸­å¹¶æ²¡æœ‰ç”»å‡ºåå››ç§æƒ…å†µï¼Œè¯»è€…å¯ä»¥å‚è€ƒä»£ç è‡ªè¡Œç†è§£ã€‚</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>private void fixAfterDeletion(Entry&lt;K,V&gt; x) {
    while (x != root &amp;&amp; colorOf(x) == BLACK) {
        if (x == leftOf(parentOf(x))) {
            Entry&lt;K,V&gt; sib = rightOf(parentOf(x));
            if (colorOf(sib) == RED) {
                setColor(sib, BLACK);                   // æƒ…å†µ1
                setColor(parentOf(x), RED);             // æƒ…å†µ1
                rotateLeft(parentOf(x));                // æƒ…å†µ1
                sib = rightOf(parentOf(x));             // æƒ…å†µ1
            }
            if (colorOf(leftOf(sib))  == BLACK &amp;&amp;
                colorOf(rightOf(sib)) == BLACK) {
                setColor(sib, RED);                     // æƒ…å†µ2
                x = parentOf(x);                        // æƒ…å†µ2
            } else {
                if (colorOf(rightOf(sib)) == BLACK) {
                    setColor(leftOf(sib), BLACK);       // æƒ…å†µ3
                    setColor(sib, RED);                 // æƒ…å†µ3
                    rotateRight(sib);                   // æƒ…å†µ3
                    sib = rightOf(parentOf(x));         // æƒ…å†µ3
                }
                setColor(sib, colorOf(parentOf(x)));    // æƒ…å†µ4
                setColor(parentOf(x), BLACK);           // æƒ…å†µ4
                setColor(rightOf(sib), BLACK);          // æƒ…å†µ4
                rotateLeft(parentOf(x));                // æƒ…å†µ4
                x = root;                               // æƒ…å†µ4
            }
        } else { // è·Ÿå‰å››ç§æƒ…å†µå¯¹ç§°
            Entry&lt;K,V&gt; sib = leftOf(parentOf(x));
            if (colorOf(sib) == RED) {
                setColor(sib, BLACK);                   // æƒ…å†µ5
                setColor(parentOf(x), RED);             // æƒ…å†µ5
                rotateRight(parentOf(x));               // æƒ…å†µ5
                sib = leftOf(parentOf(x));              // æƒ…å†µ5
            }
            if (colorOf(rightOf(sib)) == BLACK &amp;&amp;
                colorOf(leftOf(sib)) == BLACK) {
                setColor(sib, RED);                     // æƒ…å†µ6
                x = parentOf(x);                        // æƒ…å†µ6
            } else {
                if (colorOf(leftOf(sib)) == BLACK) {
                    setColor(rightOf(sib), BLACK);      // æƒ…å†µ7
                    setColor(sib, RED);                 // æƒ…å†µ7
                    rotateLeft(sib);                    // æƒ…å†µ7
                    sib = leftOf(parentOf(x));          // æƒ…å†µ7
                }
                setColor(sib, colorOf(parentOf(x)));    // æƒ…å†µ8
                setColor(parentOf(x), BLACK);           // æƒ…å†µ8
                setColor(leftOf(sib), BLACK);           // æƒ…å†µ8
                rotateRight(parentOf(x));               // æƒ…å†µ8
                x = root;                               // æƒ…å†µ8
            }
        }
    }
    setColor(x, BLACK);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="å †" tabindex="-1"><a class="header-anchor" href="#å †" aria-hidden="true">#</a> å †</h2><p><strong>ä¼˜å…ˆé˜Ÿåˆ—çš„ä½œç”¨æ˜¯èƒ½ä¿è¯æ¯æ¬¡å–å‡ºçš„å…ƒç´ éƒ½æ˜¯é˜Ÿåˆ—ä¸­æƒå€¼æœ€å°çš„</strong>ã€‚è¿™é‡Œç‰µæ¶‰åˆ°äº†å¤§å°å…³ç³»ï¼Œ<strong>å…ƒç´ å¤§å°çš„è¯„åˆ¤å¯ä»¥é€šè¿‡å…ƒç´ æœ¬èº«çš„è‡ªç„¶é¡ºåº(<code>natural ordering</code>)ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ„é€ æ—¶ä¼ å…¥çš„æ¯”è¾ƒå™¨</strong>ã€‚</p><p>Javaä¸­<code>PriorityQueue</code>å®ç°äº†<code>Queue</code>æ¥å£ï¼Œä¸å…è®¸æ”¾å…¥<code>null</code>å…ƒç´ ï¼›å…¶é€šè¿‡å †å®ç°ï¼Œå…·ä½“è¯´æ˜¯é€šè¿‡å®Œå…¨äºŒå‰æ ‘(<code>complete binary tree</code>)å®ç°çš„<strong>å°é¡¶å †</strong>(ä»»æ„ä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„æƒå€¼ï¼Œéƒ½ä¸å¤§äºå…¶å·¦å³å­èŠ‚ç‚¹çš„æƒå€¼)ï¼Œä¹Ÿå°±æ„å‘³ç€å¯ä»¥é€šè¿‡æ•°ç»„æ¥ä½œä¸º<code>PriorityQueue</code>çš„åº•å±‚å®ç°ã€‚</p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/PriorityQueue_base.png" alt="PriorityQueue_base.png" tabindex="0" loading="lazy"><figcaption>PriorityQueue_base.png</figcaption></figure><p>ä¸Šå›¾ä¸­æˆ‘ä»¬ç»™æ¯ä¸ªå…ƒç´ æŒ‰ç…§å±‚åºéå†çš„æ–¹å¼è¿›è¡Œäº†ç¼–å·ï¼Œå¦‚æœä½ è¶³å¤Ÿç»†å¿ƒï¼Œä¼šå‘ç°çˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹çš„ç¼–å·æ˜¯æœ‰è”ç³»çš„ï¼Œæ›´ç¡®åˆ‡çš„è¯´çˆ¶å­èŠ‚ç‚¹çš„ç¼–å·ä¹‹é—´æœ‰å¦‚ä¸‹å…³ç³»:</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>leftNo = parentNo*2+1
rightNo = parentNo*2+2
parentNo = (nodeNo-1)/2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä¸Šè¿°ä¸‰ä¸ªå…¬å¼ï¼Œå¯ä»¥è½»æ˜“è®¡ç®—å‡ºæŸä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä»¥åŠå­èŠ‚ç‚¹çš„ä¸‹æ ‡ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå¯ä»¥ç›´æ¥ç”¨æ•°ç»„æ¥å­˜å‚¨å †çš„åŸå› ã€‚</p><p><code>PriorityQueue</code>çš„<code>peek()</code>å’Œ<code>element</code>æ“ä½œæ˜¯å¸¸æ•°æ—¶é—´ï¼Œ<code>add()</code>, <code>offer()</code>, æ— å‚æ•°çš„<code>remove()</code>ä»¥åŠ<code>poll()</code>æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(log_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>ã€‚</p><h3 id="æ–¹æ³•å‰–æ-1" tabindex="-1"><a class="header-anchor" href="#æ–¹æ³•å‰–æ-1" aria-hidden="true">#</a> æ–¹æ³•å‰–æ</h3><h4 id="add-å’Œoffer" tabindex="-1"><a class="header-anchor" href="#add-å’Œoffer" aria-hidden="true">#</a> add()å’Œoffer()</h4><p><code>add(E e)</code>å’Œ<code>offer(E e)</code>çš„è¯­ä¹‰ç›¸åŒï¼Œéƒ½æ˜¯å‘ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ’å…¥å…ƒç´ ï¼Œåªæ˜¯<code>Queue</code>æ¥å£è§„å®šäºŒè€…å¯¹æ’å…¥å¤±è´¥æ—¶çš„å¤„ç†ä¸åŒï¼Œå‰è€…åœ¨æ’å…¥å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œååˆ™åˆ™ä¼šè¿”å›<code>false</code>ã€‚å¯¹äº<code>PriorityQueue</code>è¿™ä¸¤ä¸ªæ–¹æ³•å…¶å®æ²¡ä»€ä¹ˆå·®åˆ«ã€‚</p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/PriorityQueue_offer.png" alt="PriorityQueue_offer.png" tabindex="0" loading="lazy"><figcaption>PriorityQueue_offer.png</figcaption></figure><p>æ–°åŠ å…¥çš„å…ƒç´ å¯èƒ½ä¼šç ´åå°é¡¶å †çš„æ€§è´¨ï¼Œå› æ­¤éœ€è¦è¿›è¡Œå¿…è¦çš„è°ƒæ•´ã€‚</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>//offer(E e)
public boolean offer(E e) {
    if (e == null)//ä¸å…è®¸æ”¾å…¥nullå…ƒç´ 
        throw new NullPointerException();
    modCount++;
    int i = size;
    if (i &gt;= queue.length)
        grow(i + 1);//è‡ªåŠ¨æ‰©å®¹
    size = i + 1;
    if (i == 0)//é˜Ÿåˆ—åŸæ¥ä¸ºç©ºï¼Œè¿™æ˜¯æ’å…¥çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
        queue[0] = e;
    else
        siftUp(i, e);//è°ƒæ•´
    return true;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæ‰©å®¹å‡½æ•°<code>grow()</code>ç±»ä¼¼äº<code>ArrayList</code>é‡Œçš„<code>grow()</code>å‡½æ•°ï¼Œå°±æ˜¯å†ç”³è¯·ä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œå¹¶å°†åŸæ•°ç»„çš„å…ƒç´ å¤åˆ¶è¿‡å»ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯<code>siftUp(int k, E x)</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºæ’å…¥å…ƒç´ <code>x</code>å¹¶ç»´æŒå †çš„ç‰¹æ€§ã€‚</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>//siftUp()
private void siftUp(int k, E x) {
    while (k &gt; 0) {
        int parent = (k - 1) &gt;&gt;&gt; 1;//parentNo = (nodeNo-1)/2
        Object e = queue[parent];
        if (comparator.compare(x, (E) e) &gt;= 0)//è°ƒç”¨æ¯”è¾ƒå™¨çš„æ¯”è¾ƒæ–¹æ³•
            break;
        queue[k] = e;
        k = parent;
    }
    queue[k] = x;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–°åŠ å…¥çš„å…ƒç´ <code>x</code>å¯èƒ½ä¼šç ´åå°é¡¶å †çš„æ€§è´¨ï¼Œå› æ­¤éœ€è¦è¿›è¡Œè°ƒæ•´ã€‚è°ƒæ•´çš„è¿‡ç¨‹ä¸º: <strong>ä»<code>k</code>æŒ‡å®šçš„ä½ç½®å¼€å§‹ï¼Œå°†<code>x</code>é€å±‚ä¸å½“å‰ç‚¹çš„<code>parent</code>è¿›è¡Œæ¯”è¾ƒå¹¶äº¤æ¢ï¼Œç›´åˆ°æ»¡è¶³<code>x &gt;= queue[parent]</code>ä¸ºæ­¢</strong>ã€‚æ³¨æ„è¿™é‡Œçš„æ¯”è¾ƒå¯ä»¥æ˜¯å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œä¹Ÿå¯ä»¥æ˜¯ä¾é æ¯”è¾ƒå™¨çš„é¡ºåºã€‚</p><h4 id="element-å’Œpeek" tabindex="-1"><a class="header-anchor" href="#element-å’Œpeek" aria-hidden="true">#</a> element()å’Œpeek()</h4><p><code> element()</code>å’Œ<code>peek()</code>çš„è¯­ä¹‰å®Œå…¨ç›¸åŒï¼Œéƒ½æ˜¯è·å–ä½†ä¸åˆ é™¤é˜Ÿé¦–å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯é˜Ÿåˆ—ä¸­æƒå€¼æœ€å°çš„é‚£ä¸ªå…ƒç´ ï¼ŒäºŒè€…å”¯ä¸€çš„åŒºåˆ«æ˜¯å½“æ–¹æ³•å¤±è´¥æ—¶å‰è€…æŠ›å‡ºå¼‚å¸¸ï¼Œåè€…è¿”å›<code>null</code>ã€‚æ ¹æ®å°é¡¶å †çš„æ€§è´¨ï¼Œå †é¡¶é‚£ä¸ªå…ƒç´ å°±æ˜¯å…¨å±€æœ€å°çš„é‚£ä¸ªï¼›ç”±äºå †ç”¨æ•°ç»„è¡¨ç¤ºï¼Œæ ¹æ®ä¸‹æ ‡å…³ç³»ï¼Œ<code>0</code>ä¸‹æ ‡å¤„çš„é‚£ä¸ªå…ƒç´ æ—¢æ˜¯å †é¡¶å…ƒç´ ã€‚æ‰€ä»¥<strong>ç›´æ¥è¿”å›æ•°ç»„<code>0</code>ä¸‹æ ‡å¤„çš„é‚£ä¸ªå…ƒç´ å³å¯</strong>ã€‚</p><figure><img src="https://pdai.tech/images/collection/PriorityQueue_peek.png" alt="PriorityQueue_peek.png" tabindex="0" loading="lazy"><figcaption>PriorityQueue_peek.png</figcaption></figure><p>ä»£ç ä¹Ÿå°±éå¸¸ç®€æ´:</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>//peek()
public E peek() {
    if (size == 0)
        return null;
    return (E) queue[0];//0ä¸‹æ ‡å¤„çš„é‚£ä¸ªå…ƒç´ å°±æ˜¯æœ€å°çš„é‚£ä¸ª
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="remove-å’Œpoll" tabindex="-1"><a class="header-anchor" href="#remove-å’Œpoll" aria-hidden="true">#</a> remove()å’Œpoll()</h4><p><code>remove()</code>å’Œ<code>poll()</code>æ–¹æ³•çš„è¯­ä¹‰ä¹Ÿå®Œå…¨ç›¸åŒï¼Œéƒ½æ˜¯è·å–å¹¶åˆ é™¤é˜Ÿé¦–å…ƒç´ ï¼ŒåŒºåˆ«æ˜¯å½“æ–¹æ³•å¤±è´¥æ—¶å‰è€…æŠ›å‡ºå¼‚å¸¸ï¼Œåè€…è¿”å›<code>null</code>ã€‚ç”±äºåˆ é™¤æ“ä½œä¼šæ”¹å˜é˜Ÿåˆ—çš„ç»“æ„ï¼Œä¸ºç»´æŠ¤å°é¡¶å †çš„æ€§è´¨ï¼Œéœ€è¦è¿›è¡Œå¿…è¦çš„è°ƒæ•´ã€‚</p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/PriorityQueue_poll.png" alt="PriorityQueue_poll.png" tabindex="0" loading="lazy"><figcaption>PriorityQueue_poll.png</figcaption></figure><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>public E poll() {
    if (size == 0)
        return null;
    int s = --size;
    modCount++;
    E result = (E) queue[0];//0ä¸‹æ ‡å¤„çš„é‚£ä¸ªå…ƒç´ å°±æ˜¯æœ€å°çš„é‚£ä¸ª
    E x = (E) queue[s];
    queue[s] = null;
    if (s != 0)
        siftDown(0, x);//è°ƒæ•´
    return result;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹ ä¸Šè¿°ä»£ç é¦–å…ˆè®°å½•<code>0</code>ä¸‹æ ‡å¤„çš„å…ƒç´ ï¼Œå¹¶ç”¨æœ€åä¸€ä¸ªå…ƒç´ æ›¿æ¢<code>0</code>ä¸‹æ ‡ä½ç½®çš„å…ƒç´ ï¼Œä¹‹åè°ƒç”¨<code>siftDown()</code>æ–¹æ³•å¯¹å †è¿›è¡Œè°ƒæ•´ï¼Œæœ€åè¿”å›åŸæ¥<code>0</code>ä¸‹æ ‡å¤„çš„é‚£ä¸ªå…ƒç´ (ä¹Ÿå°±æ˜¯æœ€å°çš„é‚£ä¸ªå…ƒç´ )ã€‚é‡ç‚¹æ˜¯<code>siftDown(int k, E x)</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯<strong>ä»<code>k</code>æŒ‡å®šçš„ä½ç½®å¼€å§‹ï¼Œå°†<code>x</code>é€å±‚å‘ä¸‹ä¸å½“å‰ç‚¹çš„å·¦å³å­©å­ä¸­è¾ƒå°çš„é‚£ä¸ªäº¤æ¢ï¼Œç›´åˆ°<code>x</code>å°äºæˆ–ç­‰äºå·¦å³å­©å­ä¸­çš„ä»»ä½•ä¸€ä¸ªä¸ºæ­¢</strong>ã€‚</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>//siftDown()
private void siftDown(int k, E x) {
    int half = size &gt;&gt;&gt; 1;
    while (k &lt; half) {
    	//é¦–å…ˆæ‰¾åˆ°å·¦å³å­©å­ä¸­è¾ƒå°çš„é‚£ä¸ªï¼Œè®°å½•åˆ°cé‡Œï¼Œå¹¶ç”¨childè®°å½•å…¶ä¸‹æ ‡
        int child = (k &lt;&lt; 1) + 1;//leftNo = parentNo*2+1
        Object c = queue[child];
        int right = child + 1;
        if (right &lt; size &amp;&amp;
            comparator.compare((E) c, (E) queue[right]) &gt; 0)
            c = queue[child = right];
        if (comparator.compare(x, (E) c) &lt;= 0)
            break;
        queue[k] = c;//ç„¶åç”¨cå–ä»£åŸæ¥çš„å€¼
        k = child;
    }
    queue[k] = x;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="remove-object-o" tabindex="-1"><a class="header-anchor" href="#remove-object-o" aria-hidden="true">#</a> remove(Object o)</h4><p>â€‹ <code>remove(Object o)</code>æ–¹æ³•ç”¨äºåˆ é™¤é˜Ÿåˆ—ä¸­è·Ÿ<code>o</code>ç›¸ç­‰çš„æŸä¸€ä¸ªå…ƒç´ (å¦‚æœæœ‰å¤šä¸ªç›¸ç­‰ï¼Œåªåˆ é™¤ä¸€ä¸ª)ï¼Œè¯¥æ–¹æ³•ä¸æ˜¯<code>Queue</code>æ¥å£å†…çš„æ–¹æ³•ï¼Œè€Œæ˜¯<code>Collection</code>æ¥å£çš„æ–¹æ³•ã€‚ç”±äºåˆ é™¤æ“ä½œä¼šæ”¹å˜é˜Ÿåˆ—ç»“æ„ï¼Œæ‰€ä»¥è¦è¿›è¡Œè°ƒæ•´ï¼›åˆç”±äºåˆ é™¤å…ƒç´ çš„ä½ç½®å¯èƒ½æ˜¯ä»»æ„çš„ï¼Œæ‰€ä»¥è°ƒæ•´è¿‡ç¨‹æ¯”å…¶å®ƒå‡½æ•°ç¨åŠ ç¹çã€‚å…·ä½“æ¥è¯´ï¼Œ<code>remove(Object o)</code>å¯ä»¥åˆ†ä¸º2ç§æƒ…å†µ: 1. åˆ é™¤çš„æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ã€‚ç›´æ¥åˆ é™¤å³å¯ï¼Œä¸éœ€è¦è°ƒæ•´ã€‚2. åˆ é™¤çš„ä¸æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä»åˆ é™¤ç‚¹å¼€å§‹ä»¥æœ€åä¸€ä¸ªå…ƒç´ ä¸ºå‚ç…§è°ƒç”¨ä¸€æ¬¡<code>siftDown()</code>å³å¯ã€‚æ­¤å¤„ä¸å†èµ˜è¿°ã€‚</p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/PriorityQueue_remove2.png" alt="PriorityQueue_remove2.png" tabindex="0" loading="lazy"><figcaption>PriorityQueue_remove2.png</figcaption></figure><p>å…·ä½“ä»£ç å¦‚ä¸‹:</p><div class="language-Java line-numbers-mode" data-ext="Java"><pre class="language-Java"><code>//remove(Object o)
public boolean remove(Object o) {
	//é€šè¿‡éå†æ•°ç»„çš„æ–¹å¼æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³o.equals(queue[i])å…ƒç´ çš„ä¸‹æ ‡
    int i = indexOf(o);
    if (i == -1)
        return false;
    int s = --size;
    if (s == i) //æƒ…å†µ1
        queue[i] = null;
    else {
        E moved = (E) queue[s];
        queue[s] = null;
        siftDown(i, moved);//æƒ…å†µ2
        ......
    }
    return true;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="bæ ‘ä¸b-æ ‘" tabindex="-1"><a class="header-anchor" href="#bæ ‘ä¸b-æ ‘" aria-hidden="true">#</a> Bæ ‘ä¸B+æ ‘</h2><h3 id="bæ ‘" tabindex="-1"><a class="header-anchor" href="#bæ ‘" aria-hidden="true">#</a> Bæ ‘</h3><p>â€‹ <strong>Bæ ‘</strong>æ˜¯ä¸€ç§è‡ªå¹³è¡¡<a href="https://en.wikipedia.org/wiki/Tree_data_structure" target="_blank" rel="noopener noreferrer">æ ‘æ•°æ®ç»“æ„<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œå®ƒç»´æŠ¤æœ‰åºæ•°æ®å¹¶å…è®¸ä»¥<a href="https://en.wikipedia.org/wiki/Logarithmic_time" target="_blank" rel="noopener noreferrer">å¯¹æ•°æ—¶é—´<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>è¿›è¡Œæœç´¢ï¼Œé¡ºåºè®¿é—®ï¼Œæ’å…¥å’Œåˆ é™¤ã€‚Bæ ‘æ˜¯<a href="https://en.wikipedia.org/wiki/Binary_search_tree" target="_blank" rel="noopener noreferrer">äºŒå‰æœç´¢æ ‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>çš„ä¸€èˆ¬åŒ–ï¼Œå› ä¸ºèŠ‚ç‚¹å¯ä»¥æœ‰ä¸¤ä¸ªä»¥ä¸Šçš„å­èŠ‚ç‚¹ã€‚[<a href="https://en.wikipedia.org/wiki/B-tree#cite_note-Comer-1" target="_blank" rel="noopener noreferrer">1]<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ä¸å…¶ä»–<a href="https://en.wikipedia.org/wiki/Self-balancing_binary_search_tree" target="_blank" rel="noopener noreferrer">è‡ªå¹³è¡¡äºŒè¿›åˆ¶æœç´¢æ ‘ä¸åŒ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼ŒBæ ‘éå¸¸é€‚åˆè¯»å–å’Œå†™å…¥ç›¸å¯¹è¾ƒå¤§çš„æ•°æ®å—ï¼ˆå¦‚å…‰ç›˜ï¼‰çš„å­˜å‚¨ç³»ç»Ÿã€‚å®ƒé€šå¸¸ç”¨äº<a href="https://en.wikipedia.org/wiki/Database" target="_blank" rel="noopener noreferrer">æ•°æ®åº“<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>å’Œ<a href="https://en.wikipedia.org/wiki/File_system" target="_blank" rel="noopener noreferrer">æ–‡ä»¶ç³»ç»Ÿ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€‚</p><h4 id="å®šä¹‰" tabindex="-1"><a class="header-anchor" href="#å®šä¹‰" aria-hidden="true">#</a> å®šä¹‰</h4><p>Bæ ‘æ˜¯ä¸€ç§å¹³è¡¡çš„å¤šå‰æ ‘ï¼Œé€šå¸¸æˆ‘ä»¬è¯´mé˜¶çš„Bæ ‘ï¼Œå®ƒå¿…é¡»æ»¡è¶³å¦‚ä¸‹æ¡ä»¶ï¼š</p><ul><li>æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåªæœ‰mä¸ªå­èŠ‚ç‚¹ã€‚</li><li>æ¯ä¸ªéå¶å­èŠ‚ç‚¹ï¼ˆé™¤äº†æ ¹ï¼‰å…·æœ‰è‡³å°‘[m/2]å­èŠ‚ç‚¹ã€‚</li><li>å¦‚æœæ ¹ä¸æ˜¯å¶èŠ‚ç‚¹ï¼Œåˆ™æ ¹è‡³å°‘æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚</li><li>å…·æœ‰<em>k</em>ä¸ªå­èŠ‚ç‚¹çš„éå¶èŠ‚ç‚¹åŒ…å«<code>k-1</code>ä¸ªé”®ã€‚</li><li>æ‰€æœ‰å¶å­éƒ½å‡ºç°åœ¨åŒä¸€æ°´å¹³ï¼Œæ²¡æœ‰ä»»ä½•ä¿¡æ¯ï¼ˆé«˜åº¦ä¸€è‡´ï¼‰ã€‚</li></ul><h3 id="b-æ ‘" tabindex="-1"><a class="header-anchor" href="#b-æ ‘" aria-hidden="true">#</a> B+æ ‘</h3><p>B+æ ‘æ˜¯åº”æ–‡ä»¶ç³»ç»Ÿæ‰€éœ€è€Œäº§ç”Ÿçš„Bæ ‘çš„å˜å½¢æ ‘ï¼Œé‚£ä¹ˆå¯èƒ½ä¸€å®šä¼šæƒ³åˆ°ï¼Œæ—¢ç„¶æœ‰äº†Bæ ‘ï¼Œåˆå‡ºä¸€ä¸ªB+æ ‘ï¼Œé‚£B+æ ‘å¿…ç„¶æ˜¯æœ‰å¾ˆå¤šä¼˜ç‚¹çš„ã€‚</p><p><strong>B+æ ‘çš„ç‰¹å¾ï¼š</strong></p><ul><li>æœ‰mä¸ªå­æ ‘çš„ä¸­é—´èŠ‚ç‚¹åŒ…å«æœ‰mä¸ªå…ƒç´ ï¼ˆBæ ‘ä¸­æ˜¯k-1ä¸ªå…ƒç´ ï¼‰ï¼Œæ¯ä¸ªå…ƒç´ ä¸ä¿å­˜æ•°æ®ï¼Œåªç”¨æ¥ç´¢å¼•ï¼›</li><li>æ‰€æœ‰çš„å¶å­ç»“ç‚¹ä¸­åŒ…å«äº†å…¨éƒ¨å…³é”®å­—çš„ä¿¡æ¯ï¼ŒåŠæŒ‡å‘å«æœ‰è¿™äº›å…³é”®å­—è®°å½•çš„æŒ‡é’ˆï¼Œä¸”å¶å­ç»“ç‚¹æœ¬èº«ä¾å…³é”®å­—çš„å¤§å°è‡ªå°è€Œå¤§çš„é¡ºåºé“¾æ¥ã€‚ (è€ŒB æ ‘çš„å¶å­èŠ‚ç‚¹å¹¶æ²¡æœ‰åŒ…æ‹¬å…¨éƒ¨éœ€è¦æŸ¥æ‰¾çš„ä¿¡æ¯)ï¼›</li><li>æ‰€æœ‰çš„éç»ˆç«¯ç»“ç‚¹å¯ä»¥çœ‹æˆæ˜¯ç´¢å¼•éƒ¨åˆ†ï¼Œç»“ç‚¹ä¸­ä»…å«æœ‰å…¶å­æ ‘æ ¹ç»“ç‚¹ä¸­æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰å…³é”®å­—ã€‚ (è€ŒB æ ‘çš„éç»ˆèŠ‚ç‚¹ä¹ŸåŒ…å«éœ€è¦æŸ¥æ‰¾çš„æœ‰æ•ˆä¿¡æ¯)ï¼›</li></ul><p><strong>ä¸ºä»€ä¹ˆè¯´B+æ ‘æ¯”Bæ ‘æ›´é€‚åˆæ•°æ®åº“ç´¢å¼•ï¼Ÿ</strong></p><ol><li>B+æ ‘çš„ç£ç›˜è¯»å†™ä»£ä»·æ›´ä½</li></ol><p>â€‹ B+æ ‘çš„å†…éƒ¨ç»“ç‚¹å¹¶æ²¡æœ‰æŒ‡å‘å…³é”®å­—å…·ä½“ä¿¡æ¯çš„æŒ‡é’ˆã€‚å› æ­¤å…¶å†…éƒ¨ç»“ç‚¹ç›¸å¯¹B æ ‘æ›´å°ã€‚å¦‚æœæŠŠæ‰€æœ‰åŒä¸€å†…éƒ¨ç»“ç‚¹çš„å…³é”®å­—å­˜æ”¾åœ¨åŒä¸€ç›˜å—ä¸­ï¼Œé‚£ä¹ˆç›˜å—æ‰€èƒ½å®¹çº³çš„å…³é”®å­—æ•°é‡ä¹Ÿè¶Šå¤šã€‚ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜ä¸­çš„éœ€è¦æŸ¥æ‰¾çš„å…³é”®å­—ä¹Ÿå°±è¶Šå¤šã€‚ç›¸å¯¹æ¥è¯´IOè¯»å†™æ¬¡æ•°ä¹Ÿå°±é™ä½äº†ï¼›</p><ol start="2"><li>B+æ ‘æŸ¥è¯¢æ•ˆç‡æ›´åŠ ç¨³å®š</li></ol><p>â€‹ ç”±äºéç»ˆç»“ç‚¹å¹¶ä¸æ˜¯æœ€ç»ˆæŒ‡å‘æ–‡ä»¶å†…å®¹çš„ç»“ç‚¹ï¼Œè€Œåªæ˜¯å¶å­ç»“ç‚¹ä¸­å…³é”®å­—çš„ç´¢å¼•ã€‚æ‰€ä»¥ä»»ä½•å…³é”®å­—çš„æŸ¥æ‰¾å¿…é¡»èµ°ä¸€æ¡ä»æ ¹ç»“ç‚¹åˆ°å¶å­ç»“ç‚¹çš„è·¯ã€‚æ‰€æœ‰å…³é”®å­—æŸ¥è¯¢çš„è·¯å¾„é•¿åº¦ç›¸åŒï¼Œå¯¼è‡´æ¯ä¸€ä¸ªæ•°æ®çš„æŸ¥è¯¢æ•ˆç‡ç›¸å½“ï¼›</p><ol start="3"><li>B+æ ‘ä¾¿äºèŒƒå›´æŸ¥è¯¢ï¼ˆæœ€é‡è¦çš„åŸå› ï¼ŒèŒƒå›´æŸ¥æ‰¾æ˜¯æ•°æ®åº“çš„å¸¸æ€ï¼‰</li></ol><p>â€‹ Bæ ‘åœ¨æé«˜äº†IOæ€§èƒ½çš„åŒæ—¶å¹¶æ²¡æœ‰è§£å†³å…ƒç´ éå†çš„æˆ‘æ•ˆç‡ä½ä¸‹çš„é—®é¢˜ï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒB+æ ‘åº”ç”¨è€Œç”Ÿã€‚B+æ ‘åªéœ€è¦å»éå†å¶å­èŠ‚ç‚¹å°±å¯ä»¥å®ç°æ•´æ£µæ ‘çš„éå†ã€‚è€Œä¸”åœ¨æ•°æ®åº“ä¸­åŸºäºèŒƒå›´çš„æŸ¥è¯¢æ˜¯éå¸¸é¢‘ç¹çš„ï¼Œè€ŒBæ ‘ä¸æ”¯æŒè¿™æ ·çš„æ“ä½œæˆ–è€…è¯´æ•ˆç‡å¤ªä½ã€‚è¡¥å……ï¼šBæ ‘çš„èŒƒå›´æŸ¥æ‰¾ç”¨çš„æ˜¯ä¸­åºéå†ï¼Œè€ŒB+æ ‘ç”¨çš„æ˜¯åœ¨é“¾è¡¨ä¸Šéå†ï¼›</p><p>â€‹ B+æ ‘å¦‚ä¸‹ï¼š</p><figure><a href="https://github.com/wardseptember/notes/blob/master/imgs/20200926212656.png" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/20200926212656.png" alt="" tabindex="0" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><figcaption></figcaption></figure><figure><a href="https://github.com/wardseptember/notes/blob/master/imgs/20200926212831.png" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/20200926212831.png" alt="" tabindex="0" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><figcaption></figcaption></figure><figure><a href="https://github.com/wardseptember/notes/blob/master/imgs/20200926213019.png" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/20200926213019.png" alt="" tabindex="0" loading="lazy"><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><figcaption></figcaption></figure><h4 id="ç¼ºç‚¹" tabindex="-1"><a class="header-anchor" href="#ç¼ºç‚¹" aria-hidden="true">#</a> ç¼ºç‚¹</h4><ul><li><strong>B+æ ‘æœ€å¤§çš„æ€§èƒ½é—®é¢˜æ˜¯ä¼šäº§ç”Ÿå¤§é‡çš„éšæœºIO</strong>ï¼Œéšç€æ–°æ•°æ®çš„æ’å…¥ï¼Œå¶å­èŠ‚ç‚¹ä¼šæ…¢æ…¢åˆ†è£‚ï¼Œé€»è¾‘ä¸Šè¿ç»­çš„å¶å­èŠ‚ç‚¹åœ¨ç‰©ç†ä¸Šå¾€å¾€ä¸è¿ç»­ï¼Œç”šè‡³åˆ†ç¦»çš„å¾ˆè¿œï¼Œä½†åšèŒƒå›´æŸ¥è¯¢æ—¶ï¼Œä¼šäº§ç”Ÿå¤§é‡è¯»éšæœºIOã€‚å¯¹äºå¤§é‡çš„éšæœºå†™ä¹Ÿä¸€æ ·ï¼Œä¸¾ä¸€ä¸ªæ’å…¥keyè·¨åº¦å¾ˆå¤§çš„ä¾‹å­ï¼Œå¦‚7-&gt;1000-&gt;3-&gt;2000 ... æ–°æ’å…¥çš„æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸Šç›¸éš”å¾ˆè¿œï¼Œä¼šäº§ç”Ÿå¤§é‡çš„éšæœºå†™IOã€‚</li><li>åœ¨å†™æ“ä½œæ¯”è¾ƒå¤šçš„å¤§æ•°æ®åœºæ™¯ï¼Œ<strong>é¡µåˆ†è£‚ä¼šå¯¼è‡´B+æ ‘çš„å†™å…¥æ€§èƒ½æå…¶ä¸ç¨³å®š</strong>ã€‚</li></ul><h4 id="ä¸ºä»€ä¹ˆé€‰ç”¨b-æ ‘ä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆé€‰ç”¨b-æ ‘ä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„" aria-hidden="true">#</a> ä¸ºä»€ä¹ˆé€‰ç”¨B+æ ‘ä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„</h4><ul><li>å“ˆå¸Œè™½ç„¶èƒ½å¤Ÿæä¾› <code>O(1)</code> çš„å•æ•°æ®è¡Œæ“ä½œæ€§èƒ½ï¼Œä½†æ˜¯å¯¹äºèŒƒå›´æŸ¥è¯¢å’Œæ’åºå´æ— æ³•å¾ˆå¥½åœ°æ”¯æŒï¼Œæœ€ç»ˆå¯¼è‡´å…¨è¡¨æ‰«æã€‚</li><li>B æ ‘èƒ½å¤Ÿåœ¨éå¶èŠ‚ç‚¹ä¸­å­˜å‚¨æ•°æ®ï¼Œä½†æ˜¯è¿™ä¹Ÿå¯¼è‡´åœ¨æŸ¥è¯¢è¿ç»­æ•°æ®æ—¶å¯èƒ½ä¼šå¸¦æ¥æ›´å¤šçš„éšæœº I/Oï¼Œè€Œ B+ æ ‘çš„æ‰€æœ‰å¶èŠ‚ç‚¹å¯ä»¥é€šè¿‡æŒ‡é’ˆç›¸äº’è¿æ¥ï¼Œèƒ½å¤Ÿå‡å°‘é¡ºåºéå†æ—¶äº§ç”Ÿçš„é¢å¤–éšæœº I/Oã€‚</li></ul><hr><h2 id="è·³è¡¨" tabindex="-1"><a class="header-anchor" href="#è·³è¡¨" aria-hidden="true">#</a> è·³è¡¨</h2><p>â€‹ è·³è¡¨ï¼ˆskip listï¼‰å¯¹è¡¨çš„æ˜¯å¹³è¡¡æ ‘ï¼ˆAVL Treeï¼‰å’Œ äºŒåˆ†æŸ¥æ‰¾ï¼Œæ˜¯ä¸€ç§æ’å…¥/åˆ é™¤/æœç´¢éƒ½æ˜¯<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(logn)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>çš„æ•°æ®ç»“æ„ã€‚1989å¹´å‡ºç°ã€‚å®ƒçš„æœ€å¤§ä¼˜åŠ¿æ˜¯åŸç†ç®€å•ã€å®¹æ˜“å®ç°ã€æ–¹ä¾¿æ‰©å±•ã€æ•ˆç‡æ›´é«˜ã€‚å› æ­¤åœ¨ä¸€äº›çƒ­é—¨çš„é¡¹ç›®é‡Œç”¨æ¥æ›¿ä»£å¹³è¡¡æ ‘ï¼Œå¦‚ <code>Redis</code>ã€<code>LevelDB</code>ç­‰ã€‚</p><p><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/eaaf8a2e5ad64eff95d9cb5c713a3be9~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="" loading="lazy"> ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œ è·³è·ƒè¡¨ä¸»è¦ç”±ä»¥ä¸‹éƒ¨åˆ†æ„æˆï¼š</p><ul><li>è¡¨å¤´ï¼ˆheadï¼‰ï¼šè´Ÿè´£ç»´æŠ¤è·³è·ƒè¡¨çš„èŠ‚ç‚¹æŒ‡é’ˆã€‚</li><li>è·³è·ƒè¡¨èŠ‚ç‚¹ï¼šä¿å­˜ç€å…ƒç´ å€¼ï¼Œä»¥åŠå¤šä¸ªå±‚ã€‚</li><li>å±‚ï¼šä¿å­˜ç€æŒ‡å‘å…¶ä»–å…ƒç´ çš„æŒ‡é’ˆã€‚é«˜å±‚çš„æŒ‡é’ˆè¶Šè¿‡çš„å…ƒç´ æ•°é‡å¤§äºç­‰äºä½å±‚çš„æŒ‡é’ˆï¼Œä¸ºäº†æé«˜æŸ¥æ‰¾çš„æ•ˆç‡ï¼Œç¨‹åºæ€»æ˜¯ä»é«˜å±‚å…ˆå¼€å§‹è®¿é—®ï¼Œç„¶åéšç€å…ƒç´ å€¼èŒƒå›´çš„ç¼©å°ï¼Œæ…¢æ…¢é™ä½å±‚æ¬¡ã€‚</li><li>è¡¨å°¾ï¼šå…¨éƒ¨ç”± NULL ç»„æˆï¼Œè¡¨ç¤ºè·³è·ƒè¡¨çš„æœ«å°¾ã€‚</li></ul><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/v2-168fd46e635c1ded44dc317a67ce64e5_r.jpg" alt="img" style="zoom:50%;"><p>â€‹ æœ€ä½å±‚çš„é“¾è¡¨ç»´æŠ¤äº†è·³è¡¨å†…æ‰€æœ‰çš„å…ƒç´ ï¼Œæ¯ä¸Šé¢ä¸€å±‚é“¾è¡¨éƒ½æ˜¯ä¸‹é¢ä¸€å±‚çš„å­é›†ã€‚è·³è¡¨å†…çš„æ‰€æœ‰é“¾è¡¨çš„å…ƒç´ éƒ½æ˜¯æ’åºçš„ã€‚æŸ¥æ‰¾æ—¶ï¼Œå¯ä»¥ä»é¡¶çº§é“¾è¡¨å¼€å§‹æ‰¾ã€‚ä¸€æ—¦å‘ç°è¢«æŸ¥æ‰¾çš„å…ƒç´ å¤§äºå½“å‰é“¾è¡¨ä¸­çš„å–å€¼ï¼Œå°±ä¼šè½¬å…¥ä¸‹ä¸€å±‚é“¾è¡¨ç»§ç»­æ‰¾ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œæœç´¢æ˜¯è·³è·ƒå¼çš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨è·³è¡¨ä¸­æŸ¥æ‰¾å…ƒç´ 18ã€‚</p><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/v2-826bc3af79e9f828eaa22254535282b5_r.jpg" alt="img" style="zoom:50%;"><h4 id="æ’å…¥å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#æ’å…¥å…ƒç´ " aria-hidden="true">#</a> æ’å…¥å…ƒç´ </h4><p>â€‹ å·¥ç¨‹ä¸­çš„è·³è¡¨å¹¶ä¸ä¸¥æ ¼è¦æ±‚ç´¢å¼•å±‚ç»“ç‚¹æ•°é‡éµå¾ª2:1çš„å…³ç³»ï¼Œå› ä¸ºè¿™ç§è¦æ±‚å°†å¯¼è‡´æ’å…¥å’Œåˆ é™¤æ•°æ®æ—¶çš„è°ƒæ•´ï¼Œæˆæœ¬å¾ˆå¤§ã€‚è·³è¡¨çš„æ¯ä¸ªæ’å…¥çš„ç»“ç‚¹åœ¨æ’å…¥æ—¶è¿›è¡Œé€‰æ‹©æ˜¯å¦ä½œä¸ºç´¢å¼•ç»“ç‚¹ï¼Œå¦‚æœä½œä¸ºç´¢å¼•ç»“ç‚¹åˆ™<strong>éšæœº</strong>å‡ºå±‚æ•°ï¼Œæ•´ä¸ªè¿‡ç¨‹éƒ½æ˜¯åŸºäºæ¦‚ç‡çš„ï¼Œä½†æ˜¯åœ¨å¤§æ•°æ®é‡æ—¶å´èƒ½å¾ˆå¥½åœ°è§£å†³ç´¢å¼•å±‚æ•°å’Œç»“ç‚¹æ•°çš„æƒè¡¡ã€‚</p><p><strong>è·³è¡¨å…ƒç´ 17æ’å…¥</strong></p><p>é“¾è¡¨çš„æ’å…¥å’Œåˆ é™¤æ˜¯ç»“åˆæœç´¢è¿‡ç¨‹å®Œæˆçš„ï¼Œè´´ä¸€å¼ William Pughåœ¨è®ºæ–‡ä¸­ç»™å‡ºçš„åœ¨è·³è¡¨ä¸­æ’å…¥å…ƒç´ 17çš„è¿‡ç¨‹å›¾(æš‚æ—¶å¿½ç•¥ç»“ç‚¹17æ˜¯å¦ä½œä¸ºç´¢å¼•ç»“ç‚¹ä»¥åŠç´¢å¼•å±‚æ•°ï¼Œåé¢ä¼šè¯¦ç»†è¯´æ˜)ï¼š</p><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/e798b9f07ec7ee65962ef6ce166c4ca7_r.jpg" alt="img" align="left" style="zoom:67%;"><p><strong>è·³è¡¨å…ƒç´ 1åˆ é™¤</strong></p><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/b5eb2d8f4f0fd829336749607958f856.png" align="left"><p>è·³è¡¨å…ƒç´ çš„åˆ é™¤ä¸æ™®é€šé“¾è¡¨ç›¸æ¯”å¢åŠ äº†ç´¢å¼•å±‚çš„åˆ¤æ–­ï¼Œå¦‚æœç»“ç‚¹æ˜¯éç´¢å¼•ç»“ç‚¹åˆ™æ­£å¸¸å¤„ç†ï¼Œå¦‚æœç»“ç‚¹æ˜¯ç´¢å¼•ç»“ç‚¹é‚£è¾¹éœ€è¦è¿›è¡Œç´¢å¼•å±‚ç»“ç‚¹çš„å¤„ç†ã€‚</p><p><strong>è·³è¡¨ç»“ç‚¹çš„å¹³å‡å±‚æ•°</strong></p><p>æˆ‘ä»¬å¾ˆå®¹æ˜“çœ‹å‡ºï¼Œäº§ç”Ÿè¶Šé«˜çš„èŠ‚ç‚¹å±‚æ•°å‡ºç°æ¦‚ç‡è¶Šä½ï¼Œæ— è®ºå¦‚ä½•å±‚æ•°æ€»æ˜¯æ»¡è¶³å¹‚æ¬¡å®šå¾‹è¶Šå¤§çš„æ•°å‡ºç°çš„æ¦‚ç‡è¶Šå°ã€‚</p><p>å¦‚æœæŸä»¶äº‹çš„å‘ç”Ÿé¢‘ç‡å’Œå®ƒçš„æŸä¸ªå±æ€§æˆå¹‚å…³ç³»ï¼Œé‚£ä¹ˆè¿™ä¸ªé¢‘ç‡å°±å¯ä»¥ç§°ä¹‹ä¸ºç¬¦åˆå¹‚æ¬¡å®šå¾‹ã€‚</p><p>å¹‚æ¬¡å®šå¾‹çš„è¡¨ç°æ˜¯å°‘æ•°å‡ ä¸ªäº‹ä»¶çš„å‘ç”Ÿé¢‘ç‡å äº†æ•´ä¸ªå‘ç”Ÿé¢‘ç‡çš„å¤§éƒ¨åˆ†ï¼Œ è€Œå…¶ä½™çš„å¤§å¤šæ•°äº‹ä»¶åªå æ•´ä¸ªå‘ç”Ÿé¢‘ç‡çš„ä¸€ä¸ªå°éƒ¨åˆ†ã€‚</p><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/946ba1696f702ea1e435e22e32c7406a.png" align="left"><p>å¹‚æ¬¡å®šå¾‹åº”ç”¨åˆ°è·³è¡¨çš„éšæœºå±‚æ•°æ¥è¯´å°±æ˜¯å¤§éƒ¨åˆ†çš„èŠ‚ç‚¹å±‚æ•°éƒ½æ˜¯é»„è‰²éƒ¨åˆ†ï¼Œåªæœ‰å°‘æ•°æ˜¯ç»¿è‰²éƒ¨åˆ†ï¼Œå¹¶ä¸”æ¦‚ç‡å¾ˆä½ã€‚</p><hr><h2 id="bitmap-bloomfilter" tabindex="-1"><a class="header-anchor" href="#bitmap-bloomfilter" aria-hidden="true">#</a> BitMap &amp; BloomFilter</h2><p>å¸ƒéš†åœ¨1970å¹´æå‡ºäº†å¸ƒéš†è¿‡æ»¤å™¨(Bloom Filter)ï¼Œæ˜¯ä¸€ä¸ªå¾ˆé•¿çš„äºŒè¿›åˆ¶å‘é‡(å¯ä»¥æƒ³è±¡æˆä¸€ä¸ªåºåˆ—)å’Œä¸€ç³»åˆ—éšæœºæ˜ å°„å‡½æ•°(hash function)ã€‚å¯ç”¨äºåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼ŒæŸ¥è¯¢æ•ˆç‡å¾ˆé«˜(1-Nï¼Œæœ€ä¼˜èƒ½é€¼è¿‘äº1)ã€‚é€šå¸¸åº”ç”¨åœ¨ä¸€äº›éœ€è¦å¿«é€Ÿåˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦å±äºé›†åˆï¼Œä½†æ˜¯å¹¶ä¸ä¸¥æ ¼è¦æ±‚100%æ­£ç¡®çš„åœºåˆã€‚</p><h4 id="ç‰¹ç‚¹" tabindex="-1"><a class="header-anchor" href="#ç‰¹ç‚¹" aria-hidden="true">#</a> ç‰¹ç‚¹</h4><ul><li><code>ä¼˜ç‚¹</code>: å ç”¨ç©ºé—´å°ï¼ŒæŸ¥è¯¢å¿«</li><li><code>ç¼ºç‚¹</code>: æœ‰è¯¯åˆ¤(å“ˆå¸Œå†²çªå¯¼è‡´)ï¼Œåˆ é™¤å›°éš¾</li></ul><h4 id="bitset-å®ç°æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#bitset-å®ç°æ–¹å¼" aria-hidden="true">#</a> BitSet å®ç°æ–¹å¼</h4><p>åˆ›å»ºä¸€ä¸ªmä½BitSetï¼Œå…ˆå°†æ‰€æœ‰ä½åˆå§‹åŒ–ä¸º0ï¼Œç„¶åé€‰æ‹©kä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°ã€‚ç¬¬iä¸ªå“ˆå¸Œå‡½æ•°å¯¹å­—ç¬¦ä¸²strå“ˆå¸Œçš„ç»“æœè®°ä¸ºh(iï¼Œstr)ï¼Œä¸”h(iï¼Œstr)çš„èŒƒå›´æ˜¯0åˆ°m-1 ã€‚</p><ul><li>åŠ å…¥å­—ç¬¦ä¸²è¿‡ç¨‹</li></ul><p>ä¸‹é¢æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²å¤„ç†çš„è¿‡ç¨‹ï¼Œé¦–å…ˆæ˜¯å°†å­—ç¬¦ä¸²strâ€œè®°å½•â€åˆ°BitSetä¸­çš„è¿‡ç¨‹: å¯¹äºå­—ç¬¦ä¸²strï¼Œåˆ†åˆ«è®¡ç®—h(1ï¼Œstr)ï¼Œh(2ï¼Œstr)â€¦â€¦ h(kï¼Œstr)ã€‚ç„¶åå°†BitSetçš„ç¬¬h(1ï¼Œstr)ã€h(2ï¼Œstr)â€¦â€¦ h(kï¼Œstr)ä½è®¾ä¸º1ã€‚è¿™æ ·å°±å°†å­—ç¬¦ä¸²stræ˜ å°„åˆ°BitSetä¸­çš„kä¸ªäºŒè¿›åˆ¶ä½äº†ã€‚</p><figure><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/alg-dst-bloomfilter-0.jpeg" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><ul><li>æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦å­˜åœ¨çš„è¿‡ç¨‹</li></ul><p>ä¸‹é¢æ˜¯æ£€æŸ¥å­—ç¬¦ä¸²stræ˜¯å¦è¢«BitSetè®°å½•è¿‡çš„è¿‡ç¨‹: å¯¹äºå­—ç¬¦ä¸²strï¼Œåˆ†åˆ«è®¡ç®—h(1ï¼Œstr)ï¼Œh(2ï¼Œstr)â€¦â€¦ h(kï¼Œstr)ã€‚ç„¶åæ£€æŸ¥BitSetçš„ç¬¬h(1ï¼Œstr)ã€h(2ï¼Œstr)â€¦â€¦ h(kï¼Œstr)ä½æ˜¯å¦ä¸º1ï¼Œè‹¥å…¶ä¸­ä»»ä½•ä¸€ä½ä¸ä¸º1åˆ™å¯ä»¥åˆ¤å®šsträ¸€å®šæ²¡æœ‰è¢«è®°å½•è¿‡ã€‚è‹¥å…¨éƒ¨ä½éƒ½æ˜¯1ï¼Œåˆ™â€œè®¤ä¸ºâ€å­—ç¬¦ä¸²strå­˜åœ¨ã€‚ è‹¥ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹åº”çš„Bitä¸å…¨ä¸º1ï¼Œåˆ™å¯ä»¥è‚¯å®šè¯¥å­—ç¬¦ä¸²ä¸€å®šæ²¡æœ‰è¢«Bloom Filterè®°å½•è¿‡ã€‚(è¿™æ˜¯æ˜¾ç„¶çš„ï¼Œå› ä¸ºå­—ç¬¦ä¸²è¢«è®°å½•è¿‡ï¼Œå…¶å¯¹åº”çš„äºŒè¿›åˆ¶ä½è‚¯å®šå…¨éƒ¨è¢«è®¾ä¸º1äº†)ã€‚</p><hr><h2 id="å¤–æ’åº" tabindex="-1"><a class="header-anchor" href="#å¤–æ’åº" aria-hidden="true">#</a> å¤–æ’åº</h2><blockquote><p>å¤–æ’åº, å³å€ŸåŠ©å¤–éƒ¨å­˜å‚¨è¿›è¡Œæ’åº.</p></blockquote><ul><li><code>é€‚ç”¨èŒƒå›´</code>: å¤§æ•°æ®çš„æ’åºï¼Œå»é‡</li><li><code>åŸºæœ¬åŸç†åŠè¦ç‚¹</code>: å¤–æ’åºçš„å½’å¹¶æ–¹æ³•ï¼Œç½®æ¢é€‰æ‹©è´¥è€…æ ‘åŸç†ï¼Œæœ€ä¼˜å½’å¹¶æ ‘</li></ul><p><strong>è¾“å…¥</strong>ï¼šä¸€ä¸ªæœ€å¤šå«æœ‰nä¸ªä¸é‡å¤çš„æ­£æ•´æ•°ï¼ˆä¹Ÿå°±æ˜¯è¯´å¯èƒ½å«æœ‰å°‘äºnä¸ªä¸é‡å¤æ­£æ•´æ•°ï¼‰çš„æ–‡ä»¶ï¼Œå…¶ä¸­æ¯ä¸ªæ•°éƒ½å°äºç­‰äºnï¼Œä¸”n=10^7ï¼ˆ1000ä¸‡ä¸ªï¼‰ã€‚</p><p><strong>è¾“å‡º</strong>ï¼šå¾—åˆ°æŒ‰ä»å°åˆ°å¤§å‡åºæ’åˆ—çš„åŒ…å«æ‰€æœ‰è¾“å…¥çš„æ•´æ•°çš„åˆ—è¡¨ã€‚</p><p><strong>æ¡ä»¶</strong>ï¼šæœ€å¤šæœ‰å¤§çº¦1MBçš„å†…å­˜ç©ºé—´å¯ç”¨ï¼Œä½†ç£ç›˜ç©ºé—´è¶³å¤Ÿã€‚ä¸”è¦æ±‚è¿è¡Œæ—¶é—´åœ¨5åˆ†é’Ÿä»¥ä¸‹ï¼Œ10ç§’ä¸ºæœ€ä½³ç»“æœã€‚</p><h3 id="ä½å›¾æ’åºæ³•" tabindex="-1"><a class="header-anchor" href="#ä½å›¾æ’åºæ³•" aria-hidden="true">#</a> ä½å›¾æ’åºæ³•</h3><blockquote><p>é’ˆå¯¹æˆ‘ä»¬çš„10^7ä¸ªæ•°æ®é‡çš„ç£ç›˜æ–‡ä»¶æ’åºé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆè€ƒè™‘ï¼Œç”±äºæ¯ä¸ª7ä½åè¿›åˆ¶æ•´æ•°è¡¨ç¤ºä¸€ä¸ªå°äº1000ä¸‡çš„æ•´æ•°ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå…·æœ‰1000ä¸‡ä¸ªä½çš„å­—ç¬¦ä¸²æ¥è¡¨ç¤ºè¿™ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­ï¼Œå½“ä¸”ä»…å½“æ•´æ•°iåœ¨æ–‡ä»¶ä¸­å­˜åœ¨æ—¶ï¼Œç¬¬iä½ä¸º1ã€‚</p></blockquote><h3 id="å¤šè·¯å½’å¹¶æ’åº" tabindex="-1"><a class="header-anchor" href="#å¤šè·¯å½’å¹¶æ’åº" aria-hidden="true">#</a> å¤šè·¯å½’å¹¶æ’åº</h3><blockquote><p>å‡è®¾æ–‡ä»¶ä¸­æ•´æ•°ä¸ªæ•°ä¸ºN(Næ˜¯äº¿çº§çš„)ï¼Œæ•´æ•°ä¹‹é—´ç”¨ç©ºæ ¼åˆ†å¼€ã€‚é¦–å…ˆåˆ†å¤šæ¬¡ä»è¯¥æ–‡ä»¶ä¸­è¯»å–Mï¼ˆåä¸‡çº§ï¼‰ä¸ªæ•´æ•°ï¼Œæ¯æ¬¡å°†Mä¸ªæ•´æ•°åœ¨å†…å­˜ä¸­ä½¿ç”¨å†…éƒ¨æ’åºä¹‹åå­˜å…¥ä¸´æ—¶æ–‡ä»¶ï¼Œè¿™æ ·å°±å¾—åˆ°å¤šä¸ªå¤–éƒ¨æ–‡ä»¶ï¼Œå¯¹åº”äºå¤šä¸ªå¤–éƒ¨æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å¤šè·¯å½’å¹¶å°†å„ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­çš„æ•°æ®ä¸€è¾¹è¯»å…¥å†…å­˜ï¼Œä¸€è¾¹è¿›è¡Œå½’å¹¶è¾“å‡ºåˆ°è¾“å‡ºæ–‡ä»¶ã€‚æ˜¾ç„¶ï¼Œè¯¥æ’åºç®—æ³•éœ€è¦å¯¹æ¯ä¸ªæ•´æ•°åš2æ¬¡ç£ç›˜è¯»å’Œ2æ¬¡ç£ç›˜å†™ã€‚</p></blockquote><p><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/alg-bigdata-out-sort-0-20230222033525971.png" alt="" loading="lazy"><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/alg-bigdata-out-sort-0.png" alt="" loading="lazy"></p><h3 id="é¢˜ç›®" tabindex="-1"><a class="header-anchor" href="#é¢˜ç›®" aria-hidden="true">#</a> é¢˜ç›®</h3><img src="https://raw.githubusercontent.com/nocetfy/image/main/img/image-20230222033820140.png" alt="image-20230222033820140" align="left" style="zoom:50%;"><ul><li>ç»Ÿè®¡40äº¿ä¸ªæ•´æ•°ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„æ•°ï¼Œåªæœ‰1Gå†…å­˜ï¼Œç£ç›˜æ— é™åˆ¶ã€‚</li></ul><blockquote><p><strong>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å“ˆå¸Œå‡½æ•°å¯¹ 40 äº¿ä¸ªæ•°å­—è¿›è¡Œåˆ†ç±»è¿™ç§æ–¹å¼</strong>ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>åœ¨ç£ç›˜ä¸Šç”³è¯· 100 ä¸ªæ–‡ä»¶ï¼ˆå…·ä½“ç”³è¯·å¤šå°‘ä¸ªæ–‡ä»¶è§†æƒ…å†µè€Œå®šï¼‰</p></li><li><p>å¯¹ 40 äº¿ä¸ªæ•°ä¾æ¬¡è¿›è¡Œéå†ï¼Œå¯¹éå†åˆ°çš„æ•°å­—ç”¨å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºä¸€ä¸ªå“ˆå¸Œå€¼ï¼Œç„¶ååœ¨æ¨¡é™¤æ–‡ä»¶çš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯ <code>% 100</code> ï¼Œè¿™æ ·å°±èƒ½å‡åŒ€çš„åˆ†é…åˆ° 100 ä¸ªæ–‡ä»¶ä¸­ï¼ˆç›¸ç­‰çš„æ•°ä»–ä»¬çš„å“ˆå¸Œå€¼è‚¯å®šæ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä¸€æ ·çš„æ•°è‚¯å®šèƒ½ä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼‰</p></li><li><p>ä¾æ¬¡å¯¹ 100 ä¸ªæ–‡ä»¶è¿›è¡Œç»Ÿè®¡ï¼Œç»Ÿè®¡æ¯ä¸ªæ–‡ä»¶ä¸­å‡ºç°æœ€å¤šçš„æ•°å­—ï¼Œå¦‚ä½•ç»Ÿè®¡å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å“ˆå¸Œè¡¨è¿›è¡Œç»Ÿè®¡ï¼Œ<code>key</code> è¿˜æ˜¯æ•°å­—ï¼Œ<code>value</code> è¿˜æ˜¯å‡ºç°æ¬¡æ•°ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ–‡ä»¶ä¸­çš„æ•°å¤§æ¦‚æ˜¯ <code>40 äº¿ / 100</code> ä¸ªï¼Œä¹Ÿå°±æ˜¯åªå ç”¨ <code>32 GB / 100 = 0.32 GB</code>ï¼Œå†…å­˜è¶³å¤Ÿã€‚</p></li><li><p>å†ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨ä¿å­˜æ¯ä¸ªæ–‡ä»¶å‡ºç°æœ€å¤šçš„æ•°å­—å’Œå‡ºç°æ¬¡æ•°ï¼ˆä¹Ÿå°±æ˜¯åªä¿å­˜ 100 ä¸ªæ•°ï¼‰ã€‚ç„¶åå†ä¾æ¬¡éå†å“ˆå¸Œè¡¨ï¼Œæ‰¾å‡ºç°æ¬¡æ•°æœ€å¤§å€¼å³å¯ã€‚</p></li></ol><p>æ³¨æ„ï¼šå‡è®¾å‡ºç°æœ€å·®æƒ…å†µï¼Œä¸€ä¸ªæ•°å‡ºç°äº† <code>40 äº¿ - 1</code> æ¬¡ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªæ–‡ä»¶ä¸­ä¿æŒäº†å°†è¿‘ 40 äº¿ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯ 32 GB å·¦å³ï¼Œä½†æ˜¯ä¹Ÿæ²¡äº‹ã€‚æˆ‘ä»¬ç»Ÿè®¡çš„æ—¶å€™æ˜¯åˆ†æ‰¹è¯»å…¥æ•°å­—ï¼Œå¹¶ä¸”å“ˆå¸Œè¡¨è‚¯å®šä¸ä¼šæº¢å‡ºï¼Œå› ä¸ºä½ ä¿å­˜çš„æœ¬æ¥å°±æ˜¯ <strong>æ•°å­— + å‡ºç°æ¬¡æ•°</strong>ï¼Œå‡è®¾ 2 å‡ºç°äº† 40 äº¿æ¬¡ï¼Œæˆ‘ä»¬åœ¨å“ˆå¸Œè¡¨ä¸­å°±è®°å½• <code>2 : 40 äº¿</code> ä¸å°±è¡Œäº†å—ï¼Œä¹Ÿå°±æ˜¯åªè®°å½•ä¸€ä¸ªæ•°å°±è¡Œäº†ã€‚</p></blockquote><ul><li><p>å‡è®¾æœ‰40äº¿ä¸ªæ•´æ˜¯ï¼Œç»Ÿè®¡0 ~ 42äº¿èŒƒå›´ä¸­æ²¡å‡ºç°è¿‡çš„æ¬¡æ•°ï¼Œæœ€å¤šä½¿ç”¨1Gå†…å­˜ã€‚</p><ul><li>è¿›é˜¶ï¼šå†…å­˜é™åˆ¶ä¸º10Mï¼Œä½†åªæ‰¾å‡ºä¸€ä¸ªæ•°å³å¯ã€‚</li></ul><blockquote><p><strong>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä½å›¾çš„æ–¹å¼æ¥åšï¼Œä¹Ÿå°±æ˜¯</strong> <code>bitMap</code>ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>æˆ‘ä»¬ç”¨ 1 <code>bit</code> æ¥è¡¨ç¤ºæ•°å­—æ˜¯å¦å‡ºç°è¿‡ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥å¼€<code> int[ 42 äº¿ / 8]</code> è¿™ä¹ˆå¤§çš„æ•°ç»„ï¼ˆä¸€ä¸ª Byte = 8 bitï¼‰ï¼Œè¿™é‡Œçš„ 42 äº¿æ˜¯èŒƒå›´ï¼Œå…¶å®æ„æ€å°±æ˜¯è¯´æˆ‘ä»¬çš„æ€è·¯æ²¡æœ‰å˜åŒ–ï¼Œåªæ˜¯æ¢äº†ä¸€ç§æ•°æ®çš„å­˜å‚¨æ–¹å¼ã€‚ç©ºé—´å ç”¨ï¼š<code>42 äº¿ Byte / 8</code>ï¼Œå¤§æ¦‚æ˜¯ 500 å¤š MBï¼Œæ»¡è¶³æ¡ä»¶ã€‚</p></li><li><p>ç„¶åéå†è¿™ 40 äº¿ä¸ªæ•°ï¼Œä¾æ¬¡åœ¨å¯¹åº”çš„ bit ä½ä¸Šæ ‡ä¸º 1ã€‚</p></li><li><p>æœ€åç»Ÿè®¡æˆ‘ä»¬å¼€çš„æ•°ç»„ï¼Œbit ä½ä¸Šä¸º 0 çš„å°±æ˜¯æ²¡å‡ºç°è¿‡çš„ã€‚</p></li></ol><h5 id="è¿›é˜¶" tabindex="-1"><a class="header-anchor" href="#è¿›é˜¶" aria-hidden="true">#</a> è¿›é˜¶</h5><p>â€‹ <strong>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨èŒƒå›´åˆ’åˆ†çš„æ–¹å¼</strong>ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>10 MB å¤§æ¦‚å¯ä»¥ç”³è¯· <code>int[2621440]</code> è¿™ä¹ˆå¤šæ•°ç»„ç©ºé—´ï¼Œè®¡ç®—æ–¹å¼ï¼š10 MB / 4Byte = 2621440</p></li><li><p>åˆ’åˆ†ä»½æ•°ï¼š42 äº¿ / 2621440 å¤§æ¦‚ç­‰äº 1638ï¼Œå‡è®¾è¿™ä¸ªæ•°ç»„åä¸º arrï¼Œarr[0] å°±ä»£è¡¨ 0 ~ 1637 è¿™ä¸ªèŒƒå›´å‡ºç°çš„æ•°å­—çš„ä¸ªæ•°ï¼ŒåŒç† arr[1] å°±ä»£è¡¨ 1638~ (1638+ 1638- 1) è¿™ä¸ªèŒƒå›´å‡ºç°çš„æ•°å­—çš„ä¸ªæ•°ã€‚ä¹Ÿå°±æ˜¯ç±»ä¼¼äºè¯é¢‘ç»Ÿè®¡ã€‚</p></li><li><p>ä¾æ¬¡éå†è¿™ 40 äº¿ä¸ªæ•°ï¼Œ<code>arr[æ¯ä¸ªæ•° / 1638]++</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ 0 å°±æ˜¯ arr[0]++ï¼Œ1638å°±æ˜¯ arr[1]++ï¼Œå…¶å®æ€è·¯å°±æ˜¯æŠŠèŒƒå›´åˆ’åˆ†æˆ 1638ä»½ï¼Œæ¯ä»½ç»Ÿè®¡å¯¹åº”çš„æ•°å­—ä¸ªæ•°ï¼Œå¦‚æœå¯¹åº”çš„æ•°å­—ä¸ªæ•°å°äº 1638ï¼Œè¯´æ˜åœ¨è¿™ä¸ªèŒƒå›´å†…è‚¯å®šæœ‰æ•°å­—æ²¡å‡ºç°è¿‡</p></li><li><p>é‡å¤æ­¤è¿‡ç¨‹ï¼Œå°†èŒƒå›´é€æ¸ç¼©å°å³å¯æ±‚å‡ºç­”æ¡ˆã€‚</p></li></ol></blockquote></li><li><p>æœ‰ä¸€ä¸ªåŒ…å«100äº¿ä¸ªURLçš„å¤§æ–‡ä»¶ï¼Œæ‰¾å‡ºæ‰€æœ‰é‡å¤çš„URL</p></li></ul><blockquote><p>ç¬¬ä¸€ç§åŠæ³•ï¼šä½¿ç”¨å“ˆå¸Œå‡½æ•°è¿›è¡Œåˆ†ç±»ã€‚</p><ol><li><p>ç”³è¯· N ä¸ªç£ç›˜æ–‡ä»¶</p></li><li><p>éå†æ‰€æœ‰çš„ URLï¼Œä¸ºæ¯ä¸ª URL è®¡ç®—å“ˆå¸Œå€¼ï¼Œç„¶åå†æ¨¡é™¤ Nï¼Œå°±èƒ½å‡åŒ€åœ°åˆ†ç±»åˆ°å¯¹åº”çš„æ–‡ä»¶ä¸­ï¼Œé‡å¤çš„ URL ä¸€å®šä¼šåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚</p></li><li><p>ä¾æ¬¡ç»Ÿè®¡æ¯ä¸€ä¸ªæ–‡ä»¶ä¸­é‡å¤çš„ URLï¼Œç„¶åå†æ±‡æ€»å„ä¸ªæ–‡ä»¶çš„ä¿¡æ¯å³å¯ã€‚</p></li></ol><p>ç¬¬äºŒç§åŠæ³•ï¼šä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ã€‚ä¼šæœ‰å¤±è¯¯ç‡ï¼Œä¸è¿‡æ¦‚ç‡å¾ˆä½ã€‚</p><ol><li><p>é¦–å…ˆç”³è¯·ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ bitMapï¼Œä¾¿å»ºç«‹è¾¹æ£€æŸ¥æ˜¯å¦é‡å¤</p></li><li><p>éå†æ‰€æœ‰çš„ URLï¼Œéå†åˆ°ä¸€ä¸ª URLï¼Œå°±é€šè¿‡æŸç§å“ˆå¸Œå‡½æ•°è®¡ç®—å®ƒçš„å“ˆå¸Œå€¼ï¼Œç„¶åå†æ¨¡é™¤ bitMap çš„ä½æ•°ã€‚</p></li><li><p>å¦‚æœå‘ç°å¯¹åº”çš„æ§½ä½å·²ç»ä¸º 1 ï¼ˆåˆå§‹éƒ½æ˜¯ä¸º 0ï¼Œä¸€ä¸ª bit ä½å°±ä¸¤ç§çŠ¶æ€ï¼Œ0 å’Œ 1ï¼‰ï¼Œå°±è¯´æ˜è¿™ä¸ª URL æ˜¯é‡å¤çš„ã€‚</p></li><li><p>å¦‚æœå‘ç°å¯¹åº”çš„æ§½ä½ä¸º 0ï¼Œè¯´æ˜ä¸é‡å¤ï¼Œå°†æ§½ä½ç½®ä¸º 1ã€‚</p></li></ol><p>å¯ä»¥å‘ç°ï¼Œå¦‚æœé‡å¤çš„ URL ä¸€å®šèƒ½æ‰¾å‡ºæ¥ï¼Œä½†æ˜¯å¯èƒ½ä¸é‡å¤çš„ URL ä¹Ÿè¢«æ‰¾å‡ºæ¥äº†ï¼ˆè¿™ä¹Ÿå°±æ˜¯å¤±è¯¯ç‡ï¼Œå› ä¸ºå“ˆå¸Œå†²çªï¼‰ï¼Œå¦‚æœå¯ä»¥å…è®¸æœ‰ä¸€å®šçš„å¤±è¯¯ç‡å°±å¯ä»¥ä½¿ç”¨è¿™ç§åŠæ³•ã€‚</p></blockquote><ul><li>ç™¾äº¿æ•°æ®é‡ä¸­æ‰¾å‡ºçƒ­é—¨TOP100</li></ul><blockquote><p>â€‹ é¦–å…ˆéå†å¤§æ–‡ä»¶ï¼Œå¯¹éå†åˆ°çš„æ¯ä¸ªè¯xï¼Œæ‰§è¡Œ <code>hash(x) % 5000</code>ï¼Œå°†ç»“æœä¸º i çš„è¯å­˜æ”¾åˆ°æ–‡ä»¶ ai ä¸­ã€‚éå†ç»“æŸåï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ° 5000 ä¸ªå°æ–‡ä»¶ã€‚æ¯ä¸ªå°æ–‡ä»¶çš„å¤§å°ä¸º 200KB å·¦å³ã€‚å¦‚æœæœ‰çš„å°æ–‡ä»¶å¤§å°ä»ç„¶è¶…è¿‡ 1MBï¼Œåˆ™é‡‡ç”¨åŒæ ·çš„æ–¹å¼ç»§ç»­è¿›è¡Œåˆ†è§£ã€‚</p><p>æ¥ç€ç»Ÿè®¡æ¯ä¸ªå°æ–‡ä»¶ä¸­å‡ºç°é¢‘æ•°æœ€é«˜çš„ 100 ä¸ªè¯ã€‚æœ€ç®€å•çš„æ–¹å¼æ˜¯ä½¿ç”¨ HashMap æ¥å®ç°ã€‚å…¶ä¸­ key ä¸ºè¯ï¼Œvalue ä¸ºè¯¥è¯å‡ºç°çš„é¢‘ç‡ã€‚å…·ä½“æ–¹æ³•æ˜¯ï¼šå¯¹äºéå†åˆ°çš„è¯ xï¼Œå¦‚æœåœ¨ map ä¸­ä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œ <code>map.put(x, 1)</code>ï¼›è‹¥å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œ <code>map.put(x, map.get(x)+1)</code>ï¼Œå°†è¯¥è¯é¢‘æ•°åŠ  1ã€‚</p><p>ä¸Šé¢æˆ‘ä»¬ç»Ÿè®¡äº†æ¯ä¸ªå°æ–‡ä»¶å•è¯å‡ºç°çš„é¢‘æ•°ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»´æŠ¤ä¸€ä¸ª<strong>å°é¡¶å †</strong>æ¥æ‰¾å‡ºæ‰€æœ‰è¯ä¸­å‡ºç°é¢‘æ•°æœ€é«˜çš„ 100 ä¸ªã€‚å…·ä½“æ–¹æ³•æ˜¯ï¼šä¾æ¬¡éå†æ¯ä¸ªå°æ–‡ä»¶ï¼Œæ„å»ºä¸€ä¸ª<strong>å°é¡¶å †</strong>ï¼Œå †å¤§å°ä¸º 100ã€‚å¦‚æœéå†åˆ°çš„è¯çš„å‡ºç°æ¬¡æ•°å¤§äºå †é¡¶è¯çš„å‡ºç°æ¬¡æ•°ï¼Œåˆ™ç”¨æ–°è¯æ›¿æ¢å †é¡¶çš„è¯ï¼Œç„¶åé‡æ–°è°ƒæ•´ä¸º<strong>å°é¡¶å †</strong>ï¼Œéå†ç»“æŸåï¼Œå°é¡¶å †ä¸Šçš„è¯å°±æ˜¯å‡ºç°é¢‘æ•°æœ€é«˜çš„ 100 ä¸ªè¯ã€‚</p><ol><li>åˆ†è€Œæ²»ä¹‹ï¼Œè¿›è¡Œå“ˆå¸Œå–ä½™ï¼›</li><li>ä½¿ç”¨ HashMap ç»Ÿè®¡é¢‘æ•°ï¼›</li><li>æ±‚è§£<strong>æœ€å¤§</strong>çš„ TopN ä¸ªï¼Œç”¨<strong>å°é¡¶å †</strong>ï¼›æ±‚è§£<strong>æœ€å°</strong>çš„ TopN ä¸ªï¼Œç”¨<strong>å¤§é¡¶å †</strong>ã€‚</li></ol></blockquote><ul><li>40äº¿ä¸ªæ•°ä¸­åªå‡ºç°äº†ä¸¤æ¬¡çš„æ•°</li></ul><blockquote><p>ç¬¬ä¸€ç§æ–¹å¼ï¼šå“ˆå¸Œå‡½æ•°ã€‚</p><ol><li><p>é€šè¿‡å“ˆå¸Œå‡½æ•°å¯¹ 40 äº¿ä¸ªæ•°è¿›è¡Œåˆ†æµï¼Œåˆ†åˆ°ä¸€ä¸ªä¸ªå°æ–‡ä»¶ä¸­ã€‚</p></li><li><p>ä¾æ¬¡ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡æ¯ä¸ªå°æ–‡ä»¶ä¸­åªå‡ºç°äº†ä¸¤æ¬¡çš„æ•°ã€‚</p></li><li><p>ç„¶åå†æ±‡æ€»å„ä¸ªæ–‡ä»¶ä¸­åªå‡ºç°äº†ä¸¤æ¬¡çš„æ•°å³å¯ã€‚</p></li></ol><p>ç¬¬äºŒç§æ–¹å¼ï¼šbitMapã€‚</p><ol><li><p>æ­£å¸¸æ¥è¯´æˆ‘ä»¬éƒ½æ˜¯ç”¨ 1 bit æ¥è¡¨ç¤ºå¯¹åº”çš„æ•°å­—æ˜¯å¦å‡ºç°è¿‡ï¼Œå¯¹åº”è¿™ä¸ªé¢˜ç›®ï¼Œæˆ‘ä»¬å¯ä»¥å˜åŒ–ä¸€ä¸‹ã€‚</p></li><li><p>ç”¨ 2 bit æ¥è¡¨ç¤ºå¯¹åº”çš„æ•°å­—ï¼Œ<code>00</code> ä»£è¡¨è¿™ä¸ªæ•°æ²¡æœ‰å‡ºç°è¿‡ï¼Œ<code>01</code> ä»£è¡¨è¿™ä¸ªæ•°å‡ºç°è¿‡ä¸€æ¬¡ï¼Œ<code>10</code> ä»£è¡¨è¿™ä¸ªæ•°å‡ºç°è¿‡ä¸¤æ¬¡ï¼Œ<code>11</code> ä»£è¡¨è¿™ä¸ªæ•°å‡ºç°äº†ä¸¤æ¬¡ä»¥ä¸Šã€‚</p></li><li><p>å®¹é‡å¤§æ¦‚ä½¿ç”¨ï¼š40 äº¿å¤§æ¦‚å°±æ˜¯ 232ï¼Œæ‰€ä»¥å°±æ˜¯ 232 * 2 bit / 8 ï¼Œå¤§æ¦‚å°±æ˜¯ 1 GB å·¦å³ã€‚</p></li></ol></blockquote><ul><li>5äº¿ä¸ªæ•´æ•°ï¼Œå¯»æ‰¾ä¸­ä½æ•°ï¼Œåªæœ‰10MBå†…å­˜</li></ul><blockquote><p>â€‹ é¡ºåºè¯»å–è¿™ 5 äº¿ä¸ªæ•°å­—ï¼Œå¯¹äºè¯»å–åˆ°çš„æ•°å­— numï¼Œå¦‚æœå®ƒå¯¹åº”çš„äºŒè¿›åˆ¶ä¸­æœ€é«˜ä½ä¸º1ï¼Œåˆ™æŠŠè¿™ä¸ªæ•°å­—å†™åˆ° f1 ä¸­ï¼Œå¦åˆ™å†™å…¥ f0 ä¸­ã€‚é€šè¿‡è¿™ä¸€æ­¥ï¼Œå¯ä»¥æŠŠè¿™ 5 äº¿ä¸ªæ•°åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œè€Œä¸” f0 ä¸­çš„æ•°éƒ½å¤§äº f1 ä¸­çš„æ•°ï¼ˆæœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼‰ã€‚</p><p>åˆ’åˆ†ä¹‹åï¼Œå¯ä»¥éå¸¸å®¹æ˜“åœ°çŸ¥é“ä¸­ä½æ•°æ˜¯åœ¨ f0 è¿˜æ˜¯ f1 ä¸­ã€‚å‡è®¾ f1 ä¸­æœ‰ 1 äº¿ä¸ªæ•°ï¼Œé‚£ä¹ˆä¸­ä½æ•°ä¸€å®šåœ¨ f0 ä¸­ï¼Œä¸”æ˜¯åœ¨ f0 ä¸­ï¼Œä»å°åˆ°å¤§æ’åˆ—çš„ç¬¬ 1.5 äº¿ä¸ªæ•°ä¸å®ƒåé¢çš„ä¸€ä¸ªæ•°çš„å¹³å‡å€¼ã€‚</p><blockquote><p><strong>æç¤º</strong>ï¼Œ5 äº¿æ•°çš„ä¸­ä½æ•°æ˜¯ç¬¬ 2.5 äº¿ä¸å³è¾¹ç›¸é‚»ä¸€ä¸ªæ•°æ±‚å¹³å‡å€¼ã€‚è‹¥ f1 æœ‰ä¸€äº¿ä¸ªæ•°ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯ f0 ä¸­ä»ç¬¬ 1.5 äº¿ä¸ªæ•°å¼€å§‹çš„ä¸¤ä¸ªæ•°æ±‚å¾—çš„å¹³å‡å€¼ã€‚</p></blockquote><p>å¯¹äº f0 å¯ä»¥ç”¨æ¬¡é«˜ä½çš„äºŒè¿›åˆ¶ç»§ç»­å°†æ–‡ä»¶ä¸€åˆ†ä¸ºäºŒï¼Œå¦‚æ­¤åˆ’åˆ†ä¸‹å»ï¼Œç›´åˆ°åˆ’åˆ†åçš„æ–‡ä»¶å¯ä»¥è¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼ŒæŠŠæ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ä»¥åç›´æ¥æ’åºï¼Œæ‰¾å‡ºä¸­ä½æ•°ã€‚</p><blockquote><p><strong>æ³¨æ„</strong>ï¼Œå½“æ•°æ®æ€»æ•°ä¸ºå¶æ•°ï¼Œå¦‚æœåˆ’åˆ†åä¸¤ä¸ªæ–‡ä»¶ä¸­çš„æ•°æ®æœ‰ç›¸åŒä¸ªæ•°ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯æ•°æ®è¾ƒå°çš„æ–‡ä»¶ä¸­çš„æœ€å¤§å€¼ä¸æ•°æ®è¾ƒå¤§çš„æ–‡ä»¶ä¸­çš„æœ€å°å€¼çš„å¹³å‡å€¼ã€‚</p></blockquote></blockquote><hr></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/nocetfy/edit/main/docs/interview/æ•°æ®ç»“æ„ä¸ç®—æ³•/æ•°æ®ç»“æ„.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><!----><!----></div></footer><!----><!----><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/MyNotes/assets/app-a0fec2f7.js" defer></script>
    <script src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-y/instant.page/5.1.0/instantpage.min.js" type="application/javascript"></script>
  </body>
</html>
